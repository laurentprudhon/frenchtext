---

title: chars

keywords: fastai
sidebar: home_sidebar

summary: "Set of functions used to preprocess french text characters."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_chars.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>External dependencies :</p>
<blockquote><p>pip install pandas</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Configure tabular data display in this notebook :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Character-set-normalization-for-french">Character set normalization for french<a class="anchor-link" href="#Character-set-normalization-for-french">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The config object from frenchtext.core defines the directory where the character normalization tables are located :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>ls <span class="o">{</span>chardatadir<span class="o">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>charset-fr.csv		  latinletters.csv     unicode_categories.csv
charsetstats_norm.csv	  latinnumbers.csv     unicode_families.csv
charsetstats_raw.csv	  latinsymbols.csv     unsupported.stats.csv
combiningdiacritics.csv   normalizedchars.csv  utf8-windows1252-errors.csv
controlchars.csv	  stats		       windows1252-iso8859-errors.csv
cyrillic-greek-chars.csv  unicode_blocks.csv   windows1252-utf8-errors.csv
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="0.-Unicode-characters-properties">0. Unicode characters properties<a class="anchor-link" href="#0.-Unicode-characters-properties">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="charname" class="doc_header"><code>charname</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L29" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>charname</code>(<strong><code>char</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="charcategory" class="doc_header"><code>charcategory</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L32" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>charcategory</code>(<strong><code>char</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="charsubcategory" class="doc_header"><code>charsubcategory</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>charsubcategory</code>(<strong><code>char</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="charblock" class="doc_header"><code>charblock</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L42" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>charblock</code>(<strong><code>char</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="blockfamily" class="doc_header"><code>blockfamily</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>blockfamily</code>(<strong><code>block</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charname</span><span class="p">(</span><span class="s2">&quot;🙂&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Slightly Smiling Face&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charcategory</span><span class="p">(</span><span class="s2">&quot;🙂&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Symbol&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charsubcategory</span><span class="p">(</span><span class="s2">&quot;🙂&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Other&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charblock</span><span class="p">(</span><span class="s2">&quot;🙂&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Emoticons&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">blockfamily</span><span class="p">(</span><span class="s1">&#39;Emoticons&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Symbols&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.-Explore-french-dataset-characters">1. Explore french dataset characters<a class="anchor-link" href="#1.-Explore-french-dataset-characters">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>French datasets often contain several thousands distinct Unicode characters.</p>
<p>We need to reduce the number of distinct characters fed to our natural language processing applications, for three reasons :</p>
<ul>
<li>chars considered by the user as visually equivalent will often produce a different application behavior : this is a huge problem for the user experience</li>
<li>with so many chars, the designer of the NLP application will not be able to reason about all possible combinations : this could harm the explainability of the system</li>
<li>this huge number of distinct characters brings a significant amount complexity the NLP models will have to deal with</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.1-Characters-frequency-in-french-datasets">1.1 Characters frequency in french datasets<a class="anchor-link" href="#1.1-Characters-frequency-in-french-datasets">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharstats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;charsetstats_raw.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcharstats</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>3.503992e+09</td>
      <td>4.595437e+09</td>
      <td>8.099428e+09</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>115</td>
      <td>s</td>
      <td>Latin Small Letter S</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.960554e+09</td>
      <td>2.534105e+09</td>
      <td>4.494658e+09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>97</td>
      <td>a</td>
      <td>Latin Small Letter A</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.865590e+09</td>
      <td>2.447239e+09</td>
      <td>4.312829e+09</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>110</td>
      <td>n</td>
      <td>Latin Small Letter N</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.819350e+09</td>
      <td>2.388609e+09</td>
      <td>4.207959e+09</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>105</td>
      <td>i</td>
      <td>Latin Small Letter I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.766427e+09</td>
      <td>2.331461e+09</td>
      <td>4.097888e+09</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>13497</th>
      <td>13495</td>
      <td>37294</td>
      <td>醮</td>
      <td>Cjk Unified Ideograph-91Ae</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
    </tr>
    <tr>
      <th>13498</th>
      <td>13496</td>
      <td>35824</td>
      <td>诰</td>
      <td>Cjk Unified Ideograph-8Bf0</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
    </tr>
    <tr>
      <th>13499</th>
      <td>13497</td>
      <td>26634</td>
      <td>栊</td>
      <td>Cjk Unified Ideograph-680A</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
    </tr>
    <tr>
      <th>13500</th>
      <td>13498</td>
      <td>31787</td>
      <td>簫</td>
      <td>Cjk Unified Ideograph-7C2B</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
    </tr>
    <tr>
      <th>13501</th>
      <td>13501</td>
      <td>28378</td>
      <td>滚</td>
      <td>Cjk Unified Ideograph-6Eda</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
    </tr>
  </tbody>
</table>
<p>13502 rows × 10 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.2-Characters-stats-in-Wikipedia-dataset">1.2 Characters stats in Wikipedia dataset<a class="anchor-link" href="#1.2-Characters-stats-in-Wikipedia-dataset">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>35.6 billion chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charsCountWikipedia</span> <span class="o">=</span> <span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">charsCountWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>35682395281.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>13 502 distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">distinctCharsWikipedia</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">])</span>
<span class="n">distinctCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>13502</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Only 1316 chars more frequent than 1 in 100 million</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">frequentCharsWikipedia</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">356</span><span class="p">])</span>
<span class="n">frequentCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1316</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Frequent chars represent 9.7 % of all distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctFreqCharsWikipedia</span> <span class="o">=</span> <span class="n">frequentCharsWikipedia</span><span class="o">/</span><span class="n">distinctCharsWikipedia</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctFreqCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>9.74670419197156</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.9987 % of Wikipedia chars would be preserved if we only kept the frequent chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedCharsWikipedia</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">356</span><span class="p">][</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.99871204274157</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.3-Characters-stats-in-Business-dataset">1.3 Characters stats in Business dataset<a class="anchor-link" href="#1.3-Characters-stats-in-Business-dataset">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>27.5 billion chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charsCountBusiness</span> <span class="o">=</span> <span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">charsCountBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>27577304956.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>3 763 distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">distinctCharsBusiness</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">])</span>
<span class="n">distinctCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>3763</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Only 531 chars more frequent than 1 in 100 million</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">frequentCharsBusiness</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">275</span><span class="p">])</span>
<span class="n">frequentCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>531</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Frequent chars represent 14.1 % of all distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctFreqCharsBusiness</span> <span class="o">=</span> <span class="n">frequentCharsBusiness</span><span class="o">/</span><span class="n">distinctCharsBusiness</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctFreqCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>14.11108158384268</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.9996 % of Business chars would be preserved if we only kept the frequent chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedCharsBusiness</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">275</span><span class="p">][</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.9996564385093</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.985 % of Wikipedia chars would be preserved if we only kept the frequent Business chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedBizCharsInWikipedia</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">275</span><span class="p">][</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedBizCharsInWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.9848317525845</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.4-Character-stats-after-Unicode-normalization">1.4 Character stats after Unicode normalization<a class="anchor-link" href="#1.4-Character-stats-after-Unicode-normalization">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After applying the normalization process defined below in this notebook, here are the remaining chars :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharsnorm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;charset-fr.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcharsnorm</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>FrCode</th>
      <th>Category</th>
      <th>SubCategory</th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>CountBusiness</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>separator</td>
      <td>control</td>
      <td>0</td>
      <td>NaN</td>
      <td>Reserved - End of string</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>separator</td>
      <td>space</td>
      <td>32</td>
      <td></td>
      <td>Space</td>
      <td>88494564</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>separator</td>
      <td>space</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
      <td>9588147</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>separator</td>
      <td>space</td>
      <td>9</td>
      <td>\t</td>
      <td>Char 9</td>
      <td>1522053</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>separator</td>
      <td>punctuation</td>
      <td>44</td>
      <td>,</td>
      <td>Comma</td>
      <td>286106887</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>251</th>
      <td>251</td>
      <td>emoticon</td>
      <td>object</td>
      <td>9792</td>
      <td>♀</td>
      <td>Female Sign</td>
      <td>515</td>
    </tr>
    <tr>
      <th>252</th>
      <td>252</td>
      <td>emoticon</td>
      <td>object</td>
      <td>127881</td>
      <td>🎉</td>
      <td>Party Popper</td>
      <td>356</td>
    </tr>
    <tr>
      <th>253</th>
      <td>253</td>
      <td>emoticon</td>
      <td>object</td>
      <td>9997</td>
      <td>✍</td>
      <td>Writing Hand</td>
      <td>157</td>
    </tr>
    <tr>
      <th>254</th>
      <td>254</td>
      <td>emoticon</td>
      <td>object</td>
      <td>9993</td>
      <td>✉</td>
      <td>Envelope</td>
      <td>55</td>
    </tr>
    <tr>
      <th>255</th>
      <td>255</td>
      <td>emoticon</td>
      <td>object</td>
      <td>10013</td>
      <td>✝</td>
      <td>Latin Cross</td>
      <td>22</td>
    </tr>
  </tbody>
</table>
<p>256 rows × 7 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Stats-for-the-character-families-after-normalization">Stats for the character families after normalization<a class="anchor-link" href="#Stats-for-the-character-families-after-normalization">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The table below shows the number of chars in each category (after normalization) <strong>per 100 million characters</strong> :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfblocks</span> <span class="o">=</span> <span class="n">dfcharsnorm</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span><span class="s2">&quot;SubCategory&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;Char&quot;</span><span class="p">:[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span><span class="s2">&quot;sum&quot;</span><span class="p">],</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">})</span>
<span class="n">dfblocks</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dfblocks</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">charsCountBusiness</span> <span class="o">*</span> <span class="mi">100000000</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">dfblocks</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="2" halign="left">Char</th>
      <th>CountBusiness</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>sum</th>
      <th>sum</th>
    </tr>
    <tr>
      <th>Category</th>
      <th>SubCategory</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">emoticon</th>
      <th>hand</th>
      <td>12</td>
      <td>💪👉👍👏🙏🙌👇👊👎👌✌✊</td>
      <td>42</td>
    </tr>
    <tr>
      <th>head</th>
      <td>28</td>
      <td>🙂😉😀😂😁😊🙁😅😍😃😡🤣😄🤔😎😭👹😱😜😋🤩🙄😆😛🤪😢😇🤦</td>
      <td>233</td>
    </tr>
    <tr>
      <th>object</th>
      <td>16</td>
      <td>⚠🔴🔥🏆⚽💡🚨💥⚡♫♂♀🎉✍✉✝</td>
      <td>60</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">letter</th>
      <th>digit</th>
      <td>10</td>
      <td>0123549876</td>
      <td>3271115</td>
    </tr>
    <tr>
      <th>encoding</th>
      <td>3</td>
      <td>Ã�￼</td>
      <td>249</td>
    </tr>
    <tr>
      <th>greek</th>
      <td>2</td>
      <td>λπ</td>
      <td>2</td>
    </tr>
    <tr>
      <th>latin-fr</th>
      <td>84</td>
      <td>abcdefghijklmnopqrstuvwxyzàâäçèéêëîïôöùûüÿABCD...</td>
      <td>91437146</td>
    </tr>
    <tr>
      <th>latin-other</th>
      <td>25</td>
      <td>áãåćčėğıíìńñóòõøšşßúÁÅŠÚŽ</td>
      <td>712</td>
    </tr>
    <tr>
      <th>other</th>
      <td>5</td>
      <td>_&amp;@\#</td>
      <td>40814</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">separator</th>
      <th>control</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>punctuation</th>
      <td>23</td>
      <td>,'.-:/")(?!»«|…;[]}{•¿¡</td>
      <td>4684722</td>
    </tr>
    <tr>
      <th>space</th>
      <td>3</td>
      <td>\n\t</td>
      <td>361183</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">symbol</th>
      <th>currency</th>
      <td>6</td>
      <td>€$¤£¥¢</td>
      <td>21099</td>
    </tr>
    <tr>
      <th>math</th>
      <td>14</td>
      <td>=&gt;+&lt;^~×≤÷≥±≠∞√</td>
      <td>50056</td>
    </tr>
    <tr>
      <th>shape</th>
      <td>15</td>
      <td>*✓⇒♥¦→★¯↓❌❐†↑←↔</td>
      <td>7954</td>
    </tr>
    <tr>
      <th>sign</th>
      <td>3</td>
      <td>©®™</td>
      <td>1754</td>
    </tr>
    <tr>
      <th>unit</th>
      <td>6</td>
      <td>%°§µØ‰</td>
      <td>102213</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="2.-Characters-normalization-pipeline">2. Characters normalization pipeline<a class="anchor-link" href="#2.-Characters-normalization-pipeline">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After a detailed study of all the frequent chars, the goal is to design a noramization pipeline which can retain as much information as possible while greatly reducing the number of dinstinct chars.</p>
<p>We saw before that it is possible to preserve 99.9996% of the original chars while keeping only 500 distinct chars. By being clever and replacing equivalent chars, we can divide this number by 2 and still retain the same amount of information.</p>
<p>It may then be useful to limit the number of distinct characters after normalization to <strong>255 distinct characters</strong> :</p>
<ul>
<li>if needed, french text chars can then be encoded with a single byte</li>
<li>the list of supported chars can be memorized by NLP application developers and users</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The normalization pipeline applies the following <strong>14 steps</strong>, which are explained and illustrated in the sections below.</p>
<ul>
<li>Fix encoding errors<ul>
<li>fix windows1252 text read as iso8859-1</li>
<li>fix utf8 text read as windows1252</li>
<li>fix windows1252 text read as utf8</li>
<li>merge Unicode combining chars</li>
<li>ignore control chars</li>
</ul>
</li>
<li>Remove display attributes<ul>
<li>replace latin letter symbols</li>
<li>replace latin letter ligatures</li>
<li>replace latin number symbols</li>
</ul>
</li>
<li>Normalize visually equivalent chars<ul>
<li>replace equivalent chars </li>
<li>replace cyrillic and greek chars looking like latin letters</li>
</ul>
</li>
<li>Encode infrequent chars while losing a little bit of information <ul>
<li>replace infrequent latin letters with diacritics</li>
<li>replace infrequent chars from other scripts</li>
<li>replace infrequent symbols </li>
<li>ignore remaining chars with no glyph </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.1-Frequent-encoding-errors-:-windows1252-read-as-iso8859-1">2.1 Frequent encoding errors : windows1252 read as iso8859-1<a class="anchor-link" href="#2.1-Frequent-encoding-errors-:-windows1252-read-as-iso8859-1">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfencodingwin1252</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;windows1252-iso8859-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfencodingwin1252</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>DecodedCode</th>
      <th>DecodedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>146</td>
      <td></td>
      <td>8217</td>
      <td>’</td>
    </tr>
    <tr>
      <th>1</th>
      <td>128</td>
      <td></td>
      <td>8364</td>
      <td>€</td>
    </tr>
    <tr>
      <th>2</th>
      <td>133</td>
      <td></td>
      <td>8230</td>
      <td>…</td>
    </tr>
    <tr>
      <th>3</th>
      <td>150</td>
      <td></td>
      <td>8211</td>
      <td>–</td>
    </tr>
    <tr>
      <th>4</th>
      <td>156</td>
      <td></td>
      <td>339</td>
      <td>œ</td>
    </tr>
    <tr>
      <th>5</th>
      <td>149</td>
      <td></td>
      <td>8226</td>
      <td>•</td>
    </tr>
    <tr>
      <th>6</th>
      <td>147</td>
      <td></td>
      <td>8220</td>
      <td>“</td>
    </tr>
    <tr>
      <th>7</th>
      <td>148</td>
      <td></td>
      <td>8221</td>
      <td>”</td>
    </tr>
    <tr>
      <th>8</th>
      <td>151</td>
      <td></td>
      <td>8212</td>
      <td>—</td>
    </tr>
    <tr>
      <th>9</th>
      <td>145</td>
      <td></td>
      <td>8216</td>
      <td>‘</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfencodingwin1252)} frequent encoding errors seen in french datasets : a character encoded as windows1252 was incorrectly decoded as iso8859-1&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>10 frequent encoding errors seen in french datasets : a character encoded as windows1252 was incorrectly decoded as iso8859-1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char : incorrectly decoded control char seen in french text</li>
<li>DecodedCode/DecodedChare : properly decoded char which should replace the original control char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.2-Frequent-encoding-errors-:-utf8-read-as-windows1252">2.2 Frequent encoding errors : utf8 read as windows1252<a class="anchor-link" href="#2.2-Frequent-encoding-errors-:-utf8-read-as-windows1252">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfencodingutf8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;utf8-windows1252-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfencodingutf8</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ErrorSubstring</th>
      <th>DecodedCode</th>
      <th>DecodedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>â‚¬</td>
      <td>8364</td>
      <td>€</td>
    </tr>
    <tr>
      <th>1</th>
      <td>â€š</td>
      <td>8218</td>
      <td>‚</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Æ’</td>
      <td>402</td>
      <td>ƒ</td>
    </tr>
    <tr>
      <th>3</th>
      <td>â€ž</td>
      <td>8222</td>
      <td>„</td>
    </tr>
    <tr>
      <th>4</th>
      <td>â€¦</td>
      <td>8230</td>
      <td>…</td>
    </tr>
    <tr>
      <th>5</th>
      <td>â€</td>
      <td>8224</td>
      <td>†</td>
    </tr>
    <tr>
      <th>6</th>
      <td>â€¡</td>
      <td>8225</td>
      <td>‡</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Ë†</td>
      <td>710</td>
      <td>ˆ</td>
    </tr>
    <tr>
      <th>8</th>
      <td>â€°</td>
      <td>8240</td>
      <td>‰</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Å</td>
      <td>352</td>
      <td>Š</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfencodingutf8)} very unlikely substrings produced when text encoded with UTF-8 is decoded by mistake as iso8859-1 or windows1252&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>117 very unlikely substrings produced when text encoded with UTF-8 is decoded by mistake as iso8859-1 or windows1252
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>ErrorSubstring : unlikely substring of length 2 or 3 characters produced when UTF-8 text is decoded by mistake as windows1252</li>
<li>DecodedCode/DecodedChar : properly decoded char which should be used to replace the unlikley substring</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.3-Frequent-encoding-errors-:-windows1252-read-as-utf8">2.3 Frequent encoding errors : windows1252 read as utf8<a class="anchor-link" href="#2.3-Frequent-encoding-errors-:-windows1252-read-as-utf8">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfencodingwin1252utf8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;windows1252-utf8-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfencodingwin1252utf8</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>DecodedCodes</th>
      <th>DecodedChars</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>38971</td>
      <td>頻</td>
      <td>[233, 160, 187]</td>
      <td>é »</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfencodingwin1252utf8)} char very unlikely in french text produced when text encoded with iso8859-1 or windows1252 is decoded by mistake as UTF-8&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1 char very unlikely in french text produced when text encoded with iso8859-1 or windows1252 is decoded by mistake as UTF-8
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Char : unlikely char produced when text encoded with iso8859-1 or windows1252 is decoded by mistake as UTF-8</li>
<li>DecodedCodes/DecodedChars : properly decoded substring which should be used to replace the unlikley char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.4-Unicode-combining-chars">2.4 Unicode combining chars<a class="anchor-link" href="#2.4-Unicode-combining-chars">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcombiningchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;combiningdiacritics.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcombiningchars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BaseChar</th>
      <th>Code</th>
      <th>Char</th>
      <th>Diacritic</th>
      <th>CombinedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Á</td>
    </tr>
    <tr>
      <th>1</th>
      <td>E</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>É</td>
    </tr>
    <tr>
      <th>2</th>
      <td>I</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Í</td>
    </tr>
    <tr>
      <th>3</th>
      <td>O</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Ó</td>
    </tr>
    <tr>
      <th>4</th>
      <td>U</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Ú</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfcombiningchars[&#39;Char&#39;].unique())} combining chars {list(dfcombiningchars[&#39;Diacritic&#39;].unique())} should be recombined with {len(dfcombiningchars)} base latin characters to produce standard latin characters with diacritics&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>12 combining chars [&#39;Acute&#39;, &#39;Grave&#39;, &#39;Circumflex&#39;, &#39;Cedilla&#39;, &#39;Tilde&#39;, &#39;Diaeresis&#39;, &#39;Long Stroke Overlay&#39;, &#39;Macron&#39;, &#39;Caron&#39;, &#39;Dot Below&#39;, &#39;Dot Above&#39;, &#39;Ring Above&#39;] should be recombined with 274 base latin characters to produce standard latin characters with diacritics
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>BaseChar : latin char encountered first in the string, which will be modified by the combining char immediately following it</li>
<li>Code/Char : combining char immediately following BaseChar, which should be combined with it to produce CombinedChar</li>
<li>Diacritic : type of accent / diacritic applied by the combining char</li>
<li>CombinedChar : latin char with diacritic produced by the combination of BaseChar and the combining Char following it</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.5-Control-chars">2.5 Control chars<a class="anchor-link" href="#2.5-Control-chars">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcontrolchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;controlchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcontrolchars</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># chr(0) can&#39;t be saved in CSV file</span>
<span class="n">dfcontrolchars</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td> </td>
      <td>Char 0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td></td>
      <td>Char 1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td></td>
      <td>Char 2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td></td>
      <td>Char 3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td></td>
      <td>Char 4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>120</th>
      <td>65532</td>
      <td>￼</td>
      <td>Object Replacement Character</td>
    </tr>
    <tr>
      <th>121</th>
      <td>127995</td>
      <td>🏻</td>
      <td>Emoji Modifier Fitzpatrick Type-1-2</td>
    </tr>
    <tr>
      <th>122</th>
      <td>127996</td>
      <td>🏼</td>
      <td>Emoji Modifier Fitzpatrick Type-3</td>
    </tr>
    <tr>
      <th>123</th>
      <td>127997</td>
      <td>🏽</td>
      <td>Emoji Modifier Fitzpatrick Type-4</td>
    </tr>
    <tr>
      <th>124</th>
      <td>127998</td>
      <td>🏾</td>
      <td>Emoji Modifier Fitzpatrick Type-5</td>
    </tr>
  </tbody>
</table>
<p>125 rows × 3 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfcontrolchars)} control chars seen in french datasets, which can&#39;t be displayed and should be ignored&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>125 control chars seen in french datasets, which can&#39;t be displayed and should be ignored
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code : Unicode code point for the character</li>
<li>Char : control character</li>
<li>CharName : name of the character in the Python Unicode database</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.6-Latin-letter-symbols">2.6 Latin letter symbols<a class="anchor-link" href="#2.6-Latin-letter-symbols">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinsymbols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinsymbols.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinsymbols</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>8253</td>
      <td>‽</td>
      <td>Interrobang</td>
      <td>?!</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8265</td>
      <td>⁉</td>
      <td>Exclamation Question Mark</td>
      <td>!?</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8448</td>
      <td>℀</td>
      <td>Account Of</td>
      <td>a/c</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8449</td>
      <td>℁</td>
      <td>Addressed To The Subject</td>
      <td>a/s</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8450</td>
      <td>ℂ</td>
      <td>Double-Struck Capital C</td>
      <td>C</td>
      <td>Double-Struck</td>
    </tr>
    <tr>
      <th>5</th>
      <td>8451</td>
      <td>℃</td>
      <td>Degree Celsius</td>
      <td>°C</td>
      <td>Unit</td>
    </tr>
    <tr>
      <th>6</th>
      <td>8453</td>
      <td>℅</td>
      <td>Care Of</td>
      <td>c/o</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8454</td>
      <td>℆</td>
      <td>Cada Una</td>
      <td>c/u</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8457</td>
      <td>℉</td>
      <td>Degree Fahrenheit</td>
      <td>°F</td>
      <td>Unit</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8458</td>
      <td>ℊ</td>
      <td>Script Small G</td>
      <td>g</td>
      <td>Script</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinsymbols</span><span class="p">[</span><span class="mi">230</span><span class="p">:</span><span class="mi">240</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>230</th>
      <td>119908</td>
      <td>𝑤</td>
      <td>Mathematical Italic Small W</td>
      <td>w</td>
      <td>Mathematical Italic</td>
    </tr>
    <tr>
      <th>231</th>
      <td>119909</td>
      <td>𝑥</td>
      <td>Mathematical Italic Small X</td>
      <td>x</td>
      <td>Mathematical Italic</td>
    </tr>
    <tr>
      <th>232</th>
      <td>119910</td>
      <td>𝑦</td>
      <td>Mathematical Italic Small Y</td>
      <td>y</td>
      <td>Mathematical Italic</td>
    </tr>
    <tr>
      <th>233</th>
      <td>119911</td>
      <td>𝑧</td>
      <td>Mathematical Italic Small Z</td>
      <td>z</td>
      <td>Mathematical Italic</td>
    </tr>
    <tr>
      <th>234</th>
      <td>119912</td>
      <td>𝑨</td>
      <td>Mathematical Bold Italic Capital A</td>
      <td>A</td>
      <td>Mathematical Bold Italic</td>
    </tr>
    <tr>
      <th>235</th>
      <td>119913</td>
      <td>𝑩</td>
      <td>Mathematical Bold Italic Capital B</td>
      <td>B</td>
      <td>Mathematical Bold Italic</td>
    </tr>
    <tr>
      <th>236</th>
      <td>119914</td>
      <td>𝑪</td>
      <td>Mathematical Bold Italic Capital C</td>
      <td>C</td>
      <td>Mathematical Bold Italic</td>
    </tr>
    <tr>
      <th>237</th>
      <td>119915</td>
      <td>𝑫</td>
      <td>Mathematical Bold Italic Capital D</td>
      <td>D</td>
      <td>Mathematical Bold Italic</td>
    </tr>
    <tr>
      <th>238</th>
      <td>119916</td>
      <td>𝑬</td>
      <td>Mathematical Bold Italic Capital E</td>
      <td>E</td>
      <td>Mathematical Bold Italic</td>
    </tr>
    <tr>
      <th>239</th>
      <td>119917</td>
      <td>𝑭</td>
      <td>Mathematical Bold Italic Capital F</td>
      <td>F</td>
      <td>Mathematical Bold Italic</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinsymbols)} Unicode symbols which represent latin letters with a specific layout like {list(dflatinsymbols[&#39;Layout&#39;].unique())}&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>917 Unicode symbols which represent latin letters with a specific layout like [nan, &#39;Double-Struck&#39;, &#39;Unit&#39;, &#39;Script&#39;, &#39;Black-Letter&#39;, &#39;Turned&#39;, &#39;Rotated&#39;, &#39;Turned Sans-Serif&#39;, &#39;Reversed Sans-Serif&#39;, &#39;Double-Struck Italic&#39;, &#39;Parenthesized&#39;, &#39;Circled&#39;, &#39;Mathematical Bold&#39;, &#39;Mathematical Italic&#39;, &#39;Mathematical Bold Italic&#39;, &#39;Mathematical Script&#39;, &#39;Mathematical Bold Script&#39;, &#39;Mathematical Fraktur&#39;, &#39;Mathematical Double-Struck&#39;, &#39;Mathematical Bold Fraktur&#39;, &#39;Mathematical Sans-Serif&#39;, &#39;Mathematical Sans-Serif Bold&#39;, &#39;Mathematical Sans-Serif Italic&#39;, &#39;Mathematical Sans-Serif Bold Italic&#39;, &#39;Mathematical Monospace&#39;, &#39;Tortoise Shell Bracketed&#39;, &#39;Circled Italic&#39;, &#39;Squared&#39;, &#39;Negative Circled&#39;, &#39;Negative Squared&#39;, &#39;Crossed Negative Squared&#39;, &#39;Regional Indicator&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode symbol representing a latin letter with a specific layout</li>
<li>NormString : normalized string using only very frequent chars</li>
<li>Layout : info about the specific layout applied to the latin char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.7-Latin-letters-ligatures-/-Latin-letters-diacritics">2.7 Latin letters ligatures / Latin letters diacritics<a class="anchor-link" href="#2.7-Latin-letters-ligatures-/-Latin-letters-diacritics">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinletters</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinletters.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinletters</span><span class="p">[</span><span class="mi">89</span><span class="p">:</span><span class="mi">99</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>LetterName</th>
      <th>IsUpper</th>
      <th>UpperChar</th>
      <th>IsLower</th>
      <th>LowerChar</th>
      <th>IsDiacritic</th>
      <th>BaseChar</th>
      <th>Diacritics</th>
      <th>IsLigature</th>
      <th>MultiChars</th>
      <th>CharName</th>
      <th>Block</th>
      <th>Category</th>
      <th>SubCategory</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>89</th>
      <td>230</td>
      <td>æ</td>
      <td>Ae</td>
      <td>False</td>
      <td>Æ</td>
      <td>True</td>
      <td>æ</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>True</td>
      <td>ae</td>
      <td>Latin Small Letter Ae</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>90</th>
      <td>231</td>
      <td>ç</td>
      <td>C</td>
      <td>False</td>
      <td>Ç</td>
      <td>True</td>
      <td>ç</td>
      <td>True</td>
      <td>c</td>
      <td>Cedilla</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter C With Cedilla</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>91</th>
      <td>232</td>
      <td>è</td>
      <td>E</td>
      <td>False</td>
      <td>È</td>
      <td>True</td>
      <td>è</td>
      <td>True</td>
      <td>e</td>
      <td>Grave</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter E With Grave</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>92</th>
      <td>233</td>
      <td>é</td>
      <td>E</td>
      <td>False</td>
      <td>É</td>
      <td>True</td>
      <td>é</td>
      <td>True</td>
      <td>e</td>
      <td>Acute</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter E With Acute</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>93</th>
      <td>234</td>
      <td>ê</td>
      <td>E</td>
      <td>False</td>
      <td>Ê</td>
      <td>True</td>
      <td>ê</td>
      <td>True</td>
      <td>e</td>
      <td>Circumflex</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter E With Circumflex</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>94</th>
      <td>235</td>
      <td>ë</td>
      <td>E</td>
      <td>False</td>
      <td>Ë</td>
      <td>True</td>
      <td>ë</td>
      <td>True</td>
      <td>e</td>
      <td>Diaeresis</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter E With Diaeresis</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>95</th>
      <td>236</td>
      <td>ì</td>
      <td>I</td>
      <td>False</td>
      <td>Ì</td>
      <td>True</td>
      <td>ì</td>
      <td>True</td>
      <td>i</td>
      <td>Grave</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter I With Grave</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>96</th>
      <td>237</td>
      <td>í</td>
      <td>I</td>
      <td>False</td>
      <td>Í</td>
      <td>True</td>
      <td>í</td>
      <td>True</td>
      <td>i</td>
      <td>Acute</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter I With Acute</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>97</th>
      <td>238</td>
      <td>î</td>
      <td>I</td>
      <td>False</td>
      <td>Î</td>
      <td>True</td>
      <td>î</td>
      <td>True</td>
      <td>i</td>
      <td>Circumflex</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter I With Circumflex</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
    <tr>
      <th>98</th>
      <td>239</td>
      <td>ï</td>
      <td>I</td>
      <td>False</td>
      <td>Ï</td>
      <td>True</td>
      <td>ï</td>
      <td>True</td>
      <td>i</td>
      <td>Diaeresis</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Small Letter I With Diaeresis</td>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>Lowercase</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinletters)} chars representing latin letters, {len(dflatinletters[dflatinletters[&#39;IsUpper&#39;]])} upper case and {len(dflatinletters[dflatinletters[&#39;IsLower&#39;]])} lower case, {len(dflatinletters[dflatinletters[&#39;IsDiacritic&#39;]])} with diacritics like {list(dflatinletters[dflatinletters[&#39;IsDiacritic&#39;]][&#39;Diacritics&#39;].unique())[0:20]}, {len(dflatinletters[dflatinletters[&#39;IsLigature&#39;]])} representing multiple letters in ligature&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1230 chars representing latin letters, 459 upper case and 704 lower case, 1031 with diacritics like [&#39;Grave&#39;, &#39;Acute&#39;, &#39;Circumflex&#39;, &#39;Tilde&#39;, &#39;Diaeresis&#39;, &#39;Ring Above&#39;, &#39;Cedilla&#39;, &#39;Stroke&#39;, &#39;Macron&#39;, &#39;Breve&#39;, &#39;Ogonek&#39;, &#39;Dot Above&#39;, &#39;Caron&#39;, &#39;Dotless&#39;, &#39;Middle Dot&#39;, &#39;Preceded By Apostrophe&#39;, &#39;Double Acute&#39;, &#39;Long&#39;, &#39;Hook&#39;, &#39;Topbar&#39;], 88 representing multiple letters in ligature
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode character representing one or more latin letters</li>
<li>LetterName : name of the latin letter (without case and diacritics qualifiers)</li>
<li>IsUpper/UpperChar and IsLower/LowerChar : upper case or lower case equivalent chars</li>
<li>IsDiacritic =&gt; BaseChar : equivalent char without any diacritic (accents ...), Diacritics : description of all diacritics applied to the char</li>
<li>IsLigature =&gt; MultiChars : if the char represents multiple latin letters in a single ligature, string representing the equivalent list of letters</li>
<li>Block/Category/SubCategory : Unicode classification for each char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.8-Latin-numbers-and-number-symbols">2.8 Latin numbers and number symbols<a class="anchor-link" href="#2.8-Latin-numbers-and-number-symbols">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinnumbers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinnumbers.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinnumbers</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30</th>
      <td>8327</td>
      <td>₇</td>
      <td>Subscript Seven</td>
      <td>(7)</td>
      <td>Subscript</td>
    </tr>
    <tr>
      <th>31</th>
      <td>8328</td>
      <td>₈</td>
      <td>Subscript Eight</td>
      <td>(8)</td>
      <td>Subscript</td>
    </tr>
    <tr>
      <th>32</th>
      <td>8329</td>
      <td>₉</td>
      <td>Subscript Nine</td>
      <td>(9)</td>
      <td>Subscript</td>
    </tr>
    <tr>
      <th>33</th>
      <td>8528</td>
      <td>⅐</td>
      <td>Vulgar Fraction One Seventh</td>
      <td>1/7</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>34</th>
      <td>8529</td>
      <td>⅑</td>
      <td>Vulgar Fraction One Ninth</td>
      <td>1/9</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>35</th>
      <td>8530</td>
      <td>⅒</td>
      <td>Vulgar Fraction One Tenth</td>
      <td>1/10</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>36</th>
      <td>8531</td>
      <td>⅓</td>
      <td>Vulgar Fraction One Third</td>
      <td>1/3</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>37</th>
      <td>8532</td>
      <td>⅔</td>
      <td>Vulgar Fraction Two Thirds</td>
      <td>2/3</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>38</th>
      <td>8533</td>
      <td>⅕</td>
      <td>Vulgar Fraction One Fifth</td>
      <td>1/5</td>
      <td>Vulgar Fraction</td>
    </tr>
    <tr>
      <th>39</th>
      <td>8534</td>
      <td>⅖</td>
      <td>Vulgar Fraction Two Fifths</td>
      <td>2/5</td>
      <td>Vulgar Fraction</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinnumbers</span><span class="p">[</span><span class="mi">200</span><span class="p">:</span><span class="mi">210</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>200</th>
      <td>12881</td>
      <td>㉑</td>
      <td>Circled Number Twenty One</td>
      <td>(21)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>201</th>
      <td>12882</td>
      <td>㉒</td>
      <td>Circled Number Twenty Two</td>
      <td>(22)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>202</th>
      <td>12883</td>
      <td>㉓</td>
      <td>Circled Number Twenty Three</td>
      <td>(23)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>203</th>
      <td>12884</td>
      <td>㉔</td>
      <td>Circled Number Twenty Four</td>
      <td>(24)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>204</th>
      <td>12885</td>
      <td>㉕</td>
      <td>Circled Number Twenty Five</td>
      <td>(25)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>205</th>
      <td>12886</td>
      <td>㉖</td>
      <td>Circled Number Twenty Six</td>
      <td>(26)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>206</th>
      <td>12887</td>
      <td>㉗</td>
      <td>Circled Number Twenty Seven</td>
      <td>(27)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>207</th>
      <td>12888</td>
      <td>㉘</td>
      <td>Circled Number Twenty Eight</td>
      <td>(28)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>208</th>
      <td>12889</td>
      <td>㉙</td>
      <td>Circled Number Twenty Nine</td>
      <td>(29)</td>
      <td>Circled</td>
    </tr>
    <tr>
      <th>209</th>
      <td>12890</td>
      <td>㉚</td>
      <td>Circled Number Thirty</td>
      <td>(30)</td>
      <td>Circled</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinnumbers)} chars representing latin digits, some with specific layouts like {list(dflatinnumbers[&#39;Layout&#39;].unique())[1:]}&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>302 chars representing latin digits, some with specific layouts like [&#39;Superscript&#39;, &#39;Vulgar Fraction&#39;, &#39;Subscript&#39;, &#39;Roman Numeral&#39;, &#39;Small Roman Numeral&#39;, &#39;Circled&#39;, &#39;Parenthesized&#39;, &#39; Full Stop&#39;, &#39;Negative Circled&#39;, &#39;Double Circled&#39;, &#39;Dingbat Negative Circled&#39;, &#39;Dingbat Circled Sans-Serif&#39;, &#39;Dingbat Negative Circled Sans-Serif &#39;, &#39;Circled On Black Square&#39;, &#39;Fullwidth&#39;, &#39;Mathematical Bold&#39;, &#39;Mathematical Double-Struck&#39;, &#39;Mathematical Sans-Serif&#39;, &#39;Mathematical Sans-Serif Bold&#39;, &#39;Mathematical Monospace&#39;, &#39;Full Stop&#39;, &#39;Comma&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode char representing on or more latin digits</li>
<li>NormString : normalized string representing the equivalent number, plus punctuation if needed</li>
<li>Layout : info about the specific layout applied to the latin digits</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.9-Variations-on-frequent-chars-to-normalize">2.9 Variations on frequent chars to normalize<a class="anchor-link" href="#2.9-Variations-on-frequent-chars-to-normalize">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfnormchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;normalizedchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfnormchars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormCode</th>
      <th>NormChar</th>
      <th>NormCharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11</td>
      <td></td>
      <td>Char 11</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>13</td>
      <td>\r</td>
      <td>Char 13</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>182</td>
      <td>¶</td>
      <td>Pilcrow Sign</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8232</td>
      <td></td>
      <td>Line Separator</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>4</th>
      <td>160</td>
      <td></td>
      <td>No-Break Space</td>
      <td>32</td>
      <td></td>
      <td>Space</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfnormchars</span><span class="p">[</span><span class="mi">49</span><span class="p">:</span><span class="mi">59</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormCode</th>
      <th>NormChar</th>
      <th>NormCharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>49</th>
      <td>8209</td>
      <td>‑</td>
      <td>Non-Breaking Hyphen</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>50</th>
      <td>8210</td>
      <td>‒</td>
      <td>Figure Dash</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>51</th>
      <td>8211</td>
      <td>–</td>
      <td>En Dash</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>52</th>
      <td>8212</td>
      <td>—</td>
      <td>Em Dash</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>53</th>
      <td>8213</td>
      <td>―</td>
      <td>Horizontal Bar</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>54</th>
      <td>8259</td>
      <td>⁃</td>
      <td>Hyphen Bullet</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>55</th>
      <td>8288</td>
      <td>⁠</td>
      <td>Word Joiner</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>56</th>
      <td>8315</td>
      <td>⁻</td>
      <td>Superscript Minus</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>57</th>
      <td>8331</td>
      <td>₋</td>
      <td>Subscript Minus</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
    <tr>
      <th>58</th>
      <td>8722</td>
      <td>−</td>
      <td>Minus Sign</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfnormchars</span><span class="p">[</span><span class="mi">25</span><span class="p">:</span><span class="mi">35</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormCode</th>
      <th>NormChar</th>
      <th>NormCharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>25</th>
      <td>697</td>
      <td>ʹ</td>
      <td>Modifier Letter Prime</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>26</th>
      <td>699</td>
      <td>ʻ</td>
      <td>Modifier Letter Turned Comma</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>27</th>
      <td>700</td>
      <td>ʼ</td>
      <td>Modifier Letter Apostrophe</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>28</th>
      <td>702</td>
      <td>ʾ</td>
      <td>Modifier Letter Right Half Ring</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>29</th>
      <td>703</td>
      <td>ʿ</td>
      <td>Modifier Letter Left Half Ring</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>30</th>
      <td>712</td>
      <td>ˈ</td>
      <td>Modifier Letter Vertical Line</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>31</th>
      <td>714</td>
      <td>ˊ</td>
      <td>Modifier Letter Acute Accent</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>32</th>
      <td>715</td>
      <td>ˋ</td>
      <td>Modifier Letter Grave Accent</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>33</th>
      <td>729</td>
      <td>˙</td>
      <td>Dot Above</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
    <tr>
      <th>34</th>
      <td>8216</td>
      <td>‘</td>
      <td>Left Single Quotation Mark</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfnormchars)} alternative chars which are sometimes used as equivalent visual representations for {len(dfnormchars[&#39;NormChar&#39;].unique())} other very frequent chars&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>171 alternative chars which are sometimes used as equivalent visual representations for 53 other very frequent chars
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : alternative Unicode char often used as a visual equivalent of a more frequent char</li>
<li>NormCode/NormChar/NormCharName : more frequent char which should be used to normalize text</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.10-Cyrillic-and-greek-chars-looking-like-latin-letters">2.10 Cyrillic and greek chars looking like latin letters<a class="anchor-link" href="#2.10-Cyrillic-and-greek-chars-looking-like-latin-letters">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcgnormchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;cyrillic-greek-chars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcgnormchars</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormCode</th>
      <th>NormChar</th>
      <th>NormCharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>949</td>
      <td>ε</td>
      <td>Greek Small Letter Epsilon</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1077</td>
      <td>е</td>
      <td>Cyrillic Small Letter Ie</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1108</td>
      <td>є</td>
      <td>Cyrillic Small Letter Ukrainian Ie</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1085</td>
      <td>н</td>
      <td>Cyrillic Small Letter En</td>
      <td>104</td>
      <td>h</td>
      <td>Latin Small Letter H</td>
    </tr>
    <tr>
      <th>9</th>
      <td>953</td>
      <td>ι</td>
      <td>Greek Small Letter Iota</td>
      <td>105</td>
      <td>i</td>
      <td>Latin Small Letter I</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1082</td>
      <td>к</td>
      <td>Cyrillic Small Letter Ka</td>
      <td>107</td>
      <td>k</td>
      <td>Latin Small Letter K</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1084</td>
      <td>м</td>
      <td>Cyrillic Small Letter Em</td>
      <td>109</td>
      <td>m</td>
      <td>Latin Small Letter M</td>
    </tr>
    <tr>
      <th>12</th>
      <td>951</td>
      <td>η</td>
      <td>Greek Small Letter Eta</td>
      <td>110</td>
      <td>n</td>
      <td>Latin Small Letter N</td>
    </tr>
    <tr>
      <th>13</th>
      <td>959</td>
      <td>ο</td>
      <td>Greek Small Letter Omicron</td>
      <td>111</td>
      <td>o</td>
      <td>Latin Small Letter O</td>
    </tr>
    <tr>
      <th>14</th>
      <td>963</td>
      <td>σ</td>
      <td>Greek Small Letter Sigma</td>
      <td>111</td>
      <td>o</td>
      <td>Latin Small Letter O</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfcgnormchars)} cyrillic and greek chars used as equivalent visual representations for {len(dfcgnormchars[&#39;NormChar&#39;].unique())} latin letters&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>27 cyrillic and greek chars used as equivalent visual representations for 18 latin letters
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NOTE :  this standardization step is optional.</p>
<p>Even if it sounds strange, all cyrillic and greek letters in the table above are most often used as equivalent of latin letters in the french datasets.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : cyrillic or greek char often used as a visual equivalent of a latin letter</li>
<li>NormCode/NormChar/NormCharName : more frequent char which should be used to normalize text</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.11-Replace-infrequent-latin-letters-with-diacritics">2.11 Replace infrequent latin letters with diacritics<a class="anchor-link" href="#2.11-Replace-infrequent-latin-letters-with-diacritics">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">supportedchars</span> <span class="o">=</span> <span class="n">dfcharsnorm</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">supportedchars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;  \n \t , \&#39; . - : / &#34; ) ( ? ! » « | … ; [ ] } { • ¿ ¡ 0 1 2 3 5 4 9 8 7 6 a b c d e f g h i j k l m n o p q r s t u v w x y z à â ä ç è é ê ë î ï ô ö ù û ü ÿ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z À Â Ä Ç È É Ê Ë Î Ï Ô Ö Ù Û Ü Ÿ _ &amp; @ \\ # á ã å ć č ė ğ ı í ì ń ñ ó ò õ ø š ş ß ú Á Å Š Ú Ž λ π Ã � ￼ % ° § µ Ø ‰ € $ ¤ £ ¥ ¢ = &gt; + &lt; ^ ~ × ≤ ÷ ≥ ± ≠ ∞ √ * ✓ ⇒ ♥ ¦ → ★ ¯ ↓ ❌ ❐ † ↑ ← ↔ © ® ™ 🙂 😉 😀 😂 😁 😊 🙁 😅 😍 😃 😡 🤣 😄 🤔 😎 😭 👹 😱 😜 😋 \U0001f929 🙄 😆 😛 \U0001f92a 😢 😇 🤦 💪 👉 👍 👏 🙏 🙌 👇 👊 👎 👌 ✌ ✊ ⚠ 🔴 🔥 🏆 ⚽ 💡 🚨 💥 ⚡ ♫ ♂ ♀ 🎉 ✍ ✉ ✝&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinlettersnodiacritics</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;IsDiacritic&quot;</span><span class="p">]:</span>
        <span class="n">latinlettersnodiacritics</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;BaseChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">letter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">latinlettersnodiacritics</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">supportedchars</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{letter}</span><span class="s2"> =&gt; </span><span class="si">{latinlettersnodiacritics[letter]}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">60</span> <span class="p">:</span> <span class="k">break</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Ì =&gt; I
Í =&gt; I
Ñ =&gt; N
Ò =&gt; O
Ó =&gt; O
Õ =&gt; O
Ý =&gt; Y
ý =&gt; y
Ā =&gt; A
ā =&gt; a
Ă =&gt; A
ă =&gt; a
Ą =&gt; A
ą =&gt; a
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.12-Replace-infrequent-chars-from-other-scripts">2.12 Replace infrequent chars from other scripts<a class="anchor-link" href="#2.12-Replace-infrequent-chars-from-other-scripts">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="k">def</span> <span class="nf">replaceotherscripts</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">family</span> <span class="o">=</span> <span class="n">blockfamily</span><span class="p">(</span><span class="n">charblock</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">family</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Symbols&quot;</span><span class="p">,</span><span class="s2">&quot;Ignore&quot;</span><span class="p">):</span>
                <span class="n">resStr</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">65532</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">resStr</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">outchar</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">replaceotherscripts</span><span class="p">(</span><span class="n">supportedchars</span><span class="p">,</span><span class="s2">&quot;Guānhuà (官话/官話)&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Gu￼257_nhuà (￼23448_￼35805_/￼23448_￼35441_)&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All characters from non latin scripts are preserved by encoding them with the following sequence :</p>
<p>[object replacement character] + unicode char number + [underscore]</p>
<p>This is necessary to preserve the distinct entity names in unsupported scripts, and enables decoding with full fidelity at a later stage of the pipeline.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.13-Replace-infrequent-symbols">2.13 Replace infrequent symbols<a class="anchor-link" href="#2.13-Replace-infrequent-symbols">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">replacesymbols</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">family</span> <span class="o">=</span> <span class="n">blockfamily</span><span class="p">(</span><span class="n">charblock</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">family</span> <span class="o">==</span> <span class="s2">&quot;Symbols&quot;</span><span class="p">:</span>
                <span class="n">resStr</span> <span class="o">=</span><span class="s1">&#39;$&#39;</span> <span class="o">+</span> <span class="n">charname</span><span class="p">(</span><span class="n">char</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">resStr</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">outchar</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">replacesymbols</span><span class="p">(</span><span class="n">supportedchars</span><span class="p">,</span><span class="s2">&quot;😀😈😎🙈🙌&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;😀$SmilingFaceWithHorns_😎$See-No-EvilMonkey_🙌&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All unsupported symbols are preserved by encoding them with the following sequence :</p>
<p>[dollar] + unicode char name + [underscore]</p>
<p>This enables a NLP pipeline to add english words to its vocabulary if some symbols are used frequently in the context of a sentiment analysis task.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.14-Ignore-remaining-chars-with-no-glyph">2.14 Ignore remaining chars with no glyph<a class="anchor-link" href="#2.14-Ignore-remaining-chars-with-no-glyph">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">unicodefamilies</span><span class="p">[</span><span class="n">unicodefamilies</span><span class="p">[</span><span class="s2">&quot;CharFamily&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Ignore&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>UnicodeBlock</th>
      <th>CharFamily</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>61</th>
      <td>Combining Diacritical Marks</td>
      <td>Ignore</td>
    </tr>
    <tr>
      <th>62</th>
      <td>Private Use Area</td>
      <td>Ignore</td>
    </tr>
    <tr>
      <th>63</th>
      <td>Supplementary Private Use Area-A</td>
      <td>Ignore</td>
    </tr>
    <tr>
      <th>64</th>
      <td>Supplementary Private Use Area-B</td>
      <td>Ignore</td>
    </tr>
    <tr>
      <th>65</th>
      <td>Specials</td>
      <td>Ignore</td>
    </tr>
    <tr>
      <th>66</th>
      <td>Tags</td>
      <td>Ignore</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3.-Text-normalization">3. Text normalization<a class="anchor-link" href="#3.-Text-normalization">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.1-Normalization-functions">3.1 Normalization functions<a class="anchor-link" href="#3.1-Normalization-functions">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We need to apply several replacement functions in a row, each replacement function building on the replacements already applied by the previous ones.</p>
<p>We can't simply use replace statements on immutable strings to do this : we would need to allocate new strings for each replacement at each level, and this would put a high load on the garbage collector.</p>
<p>A better solution is to implement our normalization function as a chain of iterators on chars.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">ignorechars</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">charset</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
            
<span class="k">def</span> <span class="nf">replacechars1to1</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">chardict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
            
<span class="k">def</span> <span class="nf">replacechars1toN</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">chardict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]:</span>
                <span class="k">yield</span> <span class="n">outchar</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To match several chars in an iterator, we have to build a hierarchical dictionary structure.</p>
<p>For example, if we want to implement the following replacements :</p>

<pre><code>ABC =&gt; 1
ABD =&gt; 2
AC  =&gt; 3
BC  =&gt; 4</code></pre>
<p>We build the following dictionary structure :</p>

<pre><code>A : { B : { C : 1
            D : 2

      C : 3 }

B : { C : 4 }</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The normalization functions are then chained in a chars replacement pipeline.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.2-Normalization-class-with-change-tracking">2.2 Normalization class with change tracking<a class="anchor-link" href="#2.2-Normalization-class-with-change-tracking">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TextNormalizer" class="doc_header"><code>class</code> <code>TextNormalizer</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L60" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TextNormalizer</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NormResult" class="doc_header"><code>class</code> <code>NormResult</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L355" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NormResult</code>(<strong><code>inputText</code></strong>, <strong><code>transformsDescs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NormChange" class="doc_header"><code>class</code> <code>NormChange</code><a href="https://github.com/laurentprudhon/frenchtext/tree/master/frenchtext/chars.py#L439" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NormChange</code>(<strong><code>layer</code></strong>, <strong><code>index</code></strong>, <strong><code>charsInput</code></strong>, <strong><code>charsOutput</code></strong>, <strong><code>removedInfo</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">time</span> norm = TextNormalizer()
<span class="n">norm</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 1.52 s, sys: 15.6 ms, total: 1.53 s
Wall time: 1.63 s
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1 - Fix encoding errors : windows1252 read as iso8859-1
2 - Fix encoding errors : utf8 read as windows1252
3 - Fix encoding errors :  windows1252 read as utf8
4 - Merge Unicode combining chars
5 - Ignore control chars
6 - Replace latin letter symbols
7 - Replace latin letter ligatures
8 - Replace latin number symbols
9 - Normalize equivalent chars
10 - Replace cyrillic and greek chars looking like latin letters
11 - Replace infrequent chars : latin letters with diacritics
12 - Replace infrequent chars : other scripts
13 - Replace infrequent chars : symbols
14 - Replace infrequent chars : chars to ignore</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">teststring</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">127995</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;① l`&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">156</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;uv&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">127</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;re est¨ &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">147</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;belle&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">148</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;¸ Ã  Â½ â‚¬ énième â€° &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">133</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; ⁽🇪ﬃc🇦ce⁾ ！&quot;</span>
<span class="n">teststring</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;🏻① l`\x9cuv\x7fre est¨ \x93belle\x94¸ Ã  Â½ â‚¬ énième â€° \x85 ⁽🇪ﬃc🇦ce⁾ ！&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">teststring</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(1) l&#39;oeuvre est «belle», Ã  1/2 € énième ‰ … (EfficAce) !</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">describeChanges</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">IndexError</span>                                Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-92-760a7bcb109e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>print<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">.</span>describeChanges<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-87-39cc32de25b1&gt;</span> in <span class="ansi-cyan-fg">describeChanges</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    323</span>             previousString <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>input
<span class="ansi-green-intense-fg ansi-bold">    324</span>             <span class="ansi-green-fg">for</span> changes <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>layerChanges<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 325</span><span class="ansi-red-fg">                 </span>layer <span class="ansi-blue-fg">=</span> changes<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>layer
<span class="ansi-green-intense-fg ansi-bold">    326</span>                 layerDesc <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>transforms<span class="ansi-blue-fg">[</span>layer<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    327</span>                 desc<span class="ansi-blue-fg">.</span>write<span class="ansi-blue-fg">(</span>layerDesc<span class="ansi-blue-fg">+</span><span class="ansi-blue-fg">&#34;\n&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">IndexError</span>: list index out of range</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">12</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;(1) l&#39;oeuvre&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">12</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;🏻① l`\x9cuv\x7fre&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34; l&#39;oeuv&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39; l`\x9cuv\x7f&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> -n100 norm(teststring)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>319 µs ± 129 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
</div>
 

