---

title: chars

keywords: fastai
sidebar: home_sidebar

summary: "Set of functions used to preprocess french text characters."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_chars.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Configure the root directory of the french dataset on this computer :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">rootdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">?\C:\Users\laure\OneDrive\Dev\Python\nlptextdoc\dataset 092019&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Configure tabular data display in this notebook :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_columns</span> <span class="o">=</span> <span class="mi">50</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Character-set-normalization-for-french">Character set normalization for french<a class="anchor-link" href="#Character-set-normalization-for-french">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.-Load-Unicode-character-set-data-for-latin-script">1. Load Unicode character set data for latin script<a class="anchor-link" href="#1.-Load-Unicode-character-set-data-for-latin-script">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">chardatadir</span> <span class="o">=</span> <span class="n">rootdir</span> <span class="o">/</span> <span class="s2">&quot;libdata&quot;</span> <span class="o">/</span> <span class="s2">&quot;chars&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.1-Frequent-encoding-errors-:-windows1252-read-as-iso8859-1">1.1 Frequent encoding errors : windows1252 read as iso8859-1<a class="anchor-link" href="#1.1-Frequent-encoding-errors-:-windows1252-read-as-iso8859-1">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfencodingwin1252</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;windows1252-iso8859-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfencodingwin1252</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>DecodedCode</th>
      <th>DecodedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>146</td>
      <td></td>
      <td>8217</td>
      <td>’</td>
    </tr>
    <tr>
      <th>1</th>
      <td>128</td>
      <td></td>
      <td>8364</td>
      <td>€</td>
    </tr>
    <tr>
      <th>2</th>
      <td>133</td>
      <td></td>
      <td>8230</td>
      <td>…</td>
    </tr>
    <tr>
      <th>3</th>
      <td>150</td>
      <td></td>
      <td>8211</td>
      <td>–</td>
    </tr>
    <tr>
      <th>4</th>
      <td>156</td>
      <td></td>
      <td>339</td>
      <td>œ</td>
    </tr>
    <tr>
      <th>5</th>
      <td>149</td>
      <td></td>
      <td>8226</td>
      <td>•</td>
    </tr>
    <tr>
      <th>6</th>
      <td>147</td>
      <td></td>
      <td>8220</td>
      <td>“</td>
    </tr>
    <tr>
      <th>7</th>
      <td>148</td>
      <td></td>
      <td>8221</td>
      <td>”</td>
    </tr>
    <tr>
      <th>8</th>
      <td>151</td>
      <td></td>
      <td>8212</td>
      <td>—</td>
    </tr>
    <tr>
      <th>9</th>
      <td>145</td>
      <td></td>
      <td>8216</td>
      <td>‘</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfencodingwin1252)} frequent encoding errors seen in french datasets : a character encoded as windows1252 was incorrectly decoded as iso8859-1&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>10 frequent encoding errors seen in french datasets : a character encoded as windows1252 was incorrectly decoded as iso8859-1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char : incorrectly decoded control char seen in french text</li>
<li>DecodedCode/DecodedChare : properly decoded char which should replace the original control char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">win1252errorchars</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfencodingwin1252</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">win1252errorchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;DecodedChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.2-Frequent-encoding-errors-:-utf8-read-as-windows1252">1.2 Frequent encoding errors : utf8 read as windows1252<a class="anchor-link" href="#1.2-Frequent-encoding-errors-:-utf8-read-as-windows1252">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfencodingutf8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;utf8-windows1252-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfencodingutf8</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ErrorSubstring</th>
      <th>DecodedCode</th>
      <th>DecodedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>â‚¬</td>
      <td>8364</td>
      <td>€</td>
    </tr>
    <tr>
      <th>1</th>
      <td>â€š</td>
      <td>8218</td>
      <td>‚</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Æ’</td>
      <td>402</td>
      <td>ƒ</td>
    </tr>
    <tr>
      <th>3</th>
      <td>â€ž</td>
      <td>8222</td>
      <td>„</td>
    </tr>
    <tr>
      <th>4</th>
      <td>â€¦</td>
      <td>8230</td>
      <td>…</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfencodingutf8)} very unlikely substrings produced when text encoded with UTF-8 is decoded by mistake as iso8859-1 or windows1252&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>117 very unlikely substrings produced when text encoded with UTF-8 is decoded by mistake as iso8859-1 or windows1252
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>ErrorSubstring : unlikely substring of length 2 or 3 characters produced when UTF-8 text is decoded by mistake as windows1252</li>
<li>DecodedCode/DecodedChar : properly decoded char which should be used to replace the unlikley substring</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">utf8errorchars</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfencodingutf8</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">utf8errorchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;ErrorSubstring&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;DecodedChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.3-Unicode-combining-chars">1.3 Unicode combining chars<a class="anchor-link" href="#1.3-Unicode-combining-chars">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcombiningchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;combiningdiacritics.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcombiningchars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BaseChar</th>
      <th>Code</th>
      <th>Char</th>
      <th>Diacritic</th>
      <th>CombinedChar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Á</td>
    </tr>
    <tr>
      <th>1</th>
      <td>E</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>É</td>
    </tr>
    <tr>
      <th>2</th>
      <td>I</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Í</td>
    </tr>
    <tr>
      <th>3</th>
      <td>O</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Ó</td>
    </tr>
    <tr>
      <th>4</th>
      <td>U</td>
      <td>769</td>
      <td>́</td>
      <td>Acute</td>
      <td>Ú</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfcombiningchars[&#39;Char&#39;].unique())} combining chars {list(dfcombiningchars[&#39;Diacritic&#39;].unique())} should be recombined with {len(dfcombiningchars)} base latin characters to produce standard latin characters with diacritics&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>12 combining chars [&#39;Acute&#39;, &#39;Grave&#39;, &#39;Circumflex&#39;, &#39;Cedilla&#39;, &#39;Tilde&#39;, &#39;Diaeresis&#39;, &#39;Long Stroke Overlay&#39;, &#39;Macron&#39;, &#39;Caron&#39;, &#39;Dot Below&#39;, &#39;Dot Above&#39;, &#39;Ring Above&#39;] should be recombined with 274 base latin characters to produce standard latin characters with diacritics
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>BaseChar : latin char encountered first in the string, which will be modified by the combining char immediately following it</li>
<li>Code/Char : combining char immediately following BaseChar, which should be combined with it to produce CombinedChar</li>
<li>Diacritic : type of accent / diacritic applied by the combining char</li>
<li>CombinedChar : latin char with diacritic produced by the combination of BaseChar and the combining Char following it</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">combiningchars</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfcombiningchars</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">combiningchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;BaseChar&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;CombinedChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.4-Control-chars">1.4 Control chars<a class="anchor-link" href="#1.4-Control-chars">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcontrolchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;controlchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcontrolchars</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># chr(0) can&#39;t be saved in CSV file</span>
<span class="n">dfcontrolchars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td> </td>
      <td>Char 0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td></td>
      <td>Char 1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td></td>
      <td>Char 2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td></td>
      <td>Char 3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td></td>
      <td>Char 4</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfcontrolchars)} control chars seen in french datasets, which can&#39;t be displayed and should be ignored&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>125 control chars seen in french datasets, which can&#39;t be displayed and should be ignored
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code : Unicode code point for the character</li>
<li>Char : control character</li>
<li>CharName : name of the character in the Python Unicode database</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">controlchars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">dfcontrolchars</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.5-Latin-letter-symbols">1.5 Latin letter symbols<a class="anchor-link" href="#1.5-Latin-letter-symbols">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinsymbols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinsymbols.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinsymbols</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>8253</td>
      <td>‽</td>
      <td>Interrobang</td>
      <td>?!</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8265</td>
      <td>⁉</td>
      <td>Exclamation Question Mark</td>
      <td>!?</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8448</td>
      <td>℀</td>
      <td>Account Of</td>
      <td>a/c</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8449</td>
      <td>℁</td>
      <td>Addressed To The Subject</td>
      <td>a/s</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8450</td>
      <td>ℂ</td>
      <td>Double-Struck Capital C</td>
      <td>C</td>
      <td>Double-Struck</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinsymbols)} Unicode symbols which represent latin letters with a specific layout like {list(dflatinsymbols[&#39;Layout&#39;].unique())}&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>917 Unicode symbols which represent latin letters with a specific layout like [nan, &#39;Double-Struck&#39;, &#39;Unit&#39;, &#39;Script&#39;, &#39;Black-Letter&#39;, &#39;Turned&#39;, &#39;Rotated&#39;, &#39;Turned Sans-Serif&#39;, &#39;Reversed Sans-Serif&#39;, &#39;Double-Struck Italic&#39;, &#39;Parenthesized&#39;, &#39;Circled&#39;, &#39;Mathematical Bold&#39;, &#39;Mathematical Italic&#39;, &#39;Mathematical Bold Italic&#39;, &#39;Mathematical Script&#39;, &#39;Mathematical Bold Script&#39;, &#39;Mathematical Fraktur&#39;, &#39;Mathematical Double-Struck&#39;, &#39;Mathematical Bold Fraktur&#39;, &#39;Mathematical Sans-Serif&#39;, &#39;Mathematical Sans-Serif Bold&#39;, &#39;Mathematical Sans-Serif Italic&#39;, &#39;Mathematical Sans-Serif Bold Italic&#39;, &#39;Mathematical Monospace&#39;, &#39;Tortoise Shell Bracketed&#39;, &#39;Circled Italic&#39;, &#39;Squared&#39;, &#39;Negative Circled&#39;, &#39;Negative Squared&#39;, &#39;Crossed Negative Squared&#39;, &#39;Regional Indicator&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode symbol representing a latin letter with a specific layout</li>
<li>NormString : normalized string using only very frequent chars</li>
<li>Layout : info about the specific layout applied to the latin char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinlettersnolayout</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">latinlettersremovedlayout</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinsymbols</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">latinlettersnolayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormString&quot;</span><span class="p">]</span>
    <span class="n">latinlettersremovedlayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Layout&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.6-Latin-letters">1.6 Latin letters<a class="anchor-link" href="#1.6-Latin-letters">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinletters</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinletters.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinletters</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>LetterName</th>
      <th>IsUpper</th>
      <th>UpperChar</th>
      <th>IsLower</th>
      <th>LowerChar</th>
      <th>IsDiacritic</th>
      <th>BaseChar</th>
      <th>Diacritics</th>
      <th>IsLigature</th>
      <th>MultiChars</th>
      <th>CharName</th>
      <th>Block</th>
      <th>Category</th>
      <th>SubCategory</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>65</td>
      <td>A</td>
      <td>A</td>
      <td>True</td>
      <td>A</td>
      <td>False</td>
      <td>a</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Capital Letter A</td>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>Uppercase</td>
    </tr>
    <tr>
      <th>1</th>
      <td>66</td>
      <td>B</td>
      <td>B</td>
      <td>True</td>
      <td>B</td>
      <td>False</td>
      <td>b</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Capital Letter B</td>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>Uppercase</td>
    </tr>
    <tr>
      <th>2</th>
      <td>67</td>
      <td>C</td>
      <td>C</td>
      <td>True</td>
      <td>C</td>
      <td>False</td>
      <td>c</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Capital Letter C</td>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>Uppercase</td>
    </tr>
    <tr>
      <th>3</th>
      <td>68</td>
      <td>D</td>
      <td>D</td>
      <td>True</td>
      <td>D</td>
      <td>False</td>
      <td>d</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Capital Letter D</td>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>Uppercase</td>
    </tr>
    <tr>
      <th>4</th>
      <td>69</td>
      <td>E</td>
      <td>E</td>
      <td>True</td>
      <td>E</td>
      <td>False</td>
      <td>e</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>NaN</td>
      <td>Latin Capital Letter E</td>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>Uppercase</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinletters)} chars representing latin letters, {len(dflatinletters[dflatinletters[&#39;IsUpper&#39;]])} upper case and {len(dflatinletters[dflatinletters[&#39;IsLower&#39;]])} lower case, {len(dflatinletters[dflatinletters[&#39;IsDiacritic&#39;]])} with diacritics like {list(dflatinletters[dflatinletters[&#39;IsDiacritic&#39;]][&#39;Diacritics&#39;].unique())[0:20]}, {len(dflatinletters[dflatinletters[&#39;IsLigature&#39;]])} representing multiple letters in ligature&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1230 chars representing latin letters, 459 upper case and 704 lower case, 1031 with diacritics like [&#39;Grave&#39;, &#39;Acute&#39;, &#39;Circumflex&#39;, &#39;Tilde&#39;, &#39;Diaeresis&#39;, &#39;Ring Above&#39;, &#39;Cedilla&#39;, &#39;Stroke&#39;, &#39;Macron&#39;, &#39;Breve&#39;, &#39;Ogonek&#39;, &#39;Dot Above&#39;, &#39;Caron&#39;, &#39;Dotless&#39;, &#39;Middle Dot&#39;, &#39;Preceded By Apostrophe&#39;, &#39;Double Acute&#39;, &#39;Long&#39;, &#39;Hook&#39;, &#39;Topbar&#39;], 88 representing multiple letters in ligature
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode character representing one or more latin letters</li>
<li>LetterName : name of the latin letter (without case and diacritics qualifiers)</li>
<li>IsUpper/UpperChar and IsLower/LowerChar : upper case or lower case equivalent chars</li>
<li>IsDiacritic =&gt; BaseChar : equivalent char without any diacritic (accents ...), Diacritics : description of all diacritics applied to the char</li>
<li>IsLigature =&gt; MultiChars : if the char represents multiple latin letters in a single ligature, string representing the equivalent list of letters</li>
<li>Block/Category/SubCategory : Unicode classification for each char</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinletters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">dflatinletters</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinletterstolower</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;LowerChar&quot;</span><span class="p">]:</span>
        <span class="n">latinletterstolower</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;LowerChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinlettersnodiacritics</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">latinlettersremoveddiacritics</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;IsDiacritic&quot;</span><span class="p">]:</span>
        <span class="n">latinlettersnodiacritics</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;BaseChar&quot;</span><span class="p">]</span>
        <span class="n">latinlettersremoveddiacritics</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Diacritics&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinlettersnoligatures</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;IsLigature&quot;</span><span class="p">]:</span>
        <span class="n">latinlettersnoligatures</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;MultiChars&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.7-Latin-numbers-and-number-symbols">1.7 Latin numbers and number symbols<a class="anchor-link" href="#1.7-Latin-numbers-and-number-symbols">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dflatinnumbers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinnumbers.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dflatinnumbers</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormString</th>
      <th>Layout</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>48</td>
      <td>0</td>
      <td>Digit Zero</td>
      <td>0</td>
      <td>Digit</td>
    </tr>
    <tr>
      <th>1</th>
      <td>49</td>
      <td>1</td>
      <td>Digit One</td>
      <td>1</td>
      <td>Digit</td>
    </tr>
    <tr>
      <th>2</th>
      <td>50</td>
      <td>2</td>
      <td>Digit Two</td>
      <td>2</td>
      <td>Digit</td>
    </tr>
    <tr>
      <th>3</th>
      <td>51</td>
      <td>3</td>
      <td>Digit Three</td>
      <td>3</td>
      <td>Digit</td>
    </tr>
    <tr>
      <th>4</th>
      <td>52</td>
      <td>4</td>
      <td>Digit Four</td>
      <td>4</td>
      <td>Digit</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dflatinnumbers)} chars representing latin digits, some with specific layouts like {list(dflatinnumbers[&#39;Layout&#39;].unique())[1:]}&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>302 chars representing latin digits, some with specific layouts like [&#39;Superscript&#39;, &#39;Vulgar Fraction&#39;, &#39;Subscript&#39;, &#39;Roman Numeral&#39;, &#39;Small Roman Numeral&#39;, &#39;Circled&#39;, &#39;Parenthesized&#39;, &#39; Full Stop&#39;, &#39;Negative Circled&#39;, &#39;Double Circled&#39;, &#39;Dingbat Negative Circled&#39;, &#39;Dingbat Circled Sans-Serif&#39;, &#39;Dingbat Negative Circled Sans-Serif &#39;, &#39;Circled On Black Square&#39;, &#39;Fullwidth&#39;, &#39;Mathematical Bold&#39;, &#39;Mathematical Double-Struck&#39;, &#39;Mathematical Sans-Serif&#39;, &#39;Mathematical Sans-Serif Bold&#39;, &#39;Mathematical Monospace&#39;, &#39;Full Stop&#39;, &#39;Comma&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : Unicode char representing on or more latin digits</li>
<li>NormString : normalized string representing the equivalent number, plus punctuation if needed</li>
<li>Layout : info about the specific layout applied to the latin digits</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latinnumbersnolayout</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">latinnumbersremovedlayout</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinnumbers</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">latinnumbersnolayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormString&quot;</span><span class="p">]</span>
    <span class="n">latinnumbersremovedlayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Layout&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.8-Variations-on-frequent-chars-to-normalize">1.8 Variations on frequent chars to normalize<a class="anchor-link" href="#1.8-Variations-on-frequent-chars-to-normalize">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfnormchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;normalizedchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfnormchars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Char</th>
      <th>CharName</th>
      <th>NormCode</th>
      <th>NormChar</th>
      <th>NormCharName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11</td>
      <td></td>
      <td>Char 11</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>13</td>
      <td>\r</td>
      <td>Char 13</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>182</td>
      <td>¶</td>
      <td>Pilcrow Sign</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8232</td>
      <td></td>
      <td>Line Separator</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
    </tr>
    <tr>
      <th>4</th>
      <td>160</td>
      <td></td>
      <td>No-Break Space</td>
      <td>32</td>
      <td></td>
      <td>Space</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{len(dfnormchars)} alternative chars which are sometimes used as equivalent visual representations for {len(dfnormchars[&#39;NormChar&#39;].unique())} other very frequent chars&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>171 alternative chars which are sometimes used as equivalent visual representations for 53 other very frequent chars
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Columns :</p>
<ul>
<li>Code/Char/CharName : alternative Unicode char often used as a visual equivalent of a more frequent char</li>
<li>NormCode/NormChar/NormCharName : more frequent char which should be used to normalize text</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">normalizedchars</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfnormchars</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">normalizedchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormChar&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2.-Text-normalization">2. Text normalization<a class="anchor-link" href="#2.-Text-normalization">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.1-Normalization-functions">2.1 Normalization functions<a class="anchor-link" href="#2.1-Normalization-functions">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We need to apply several replacement functions in a row, each replacement function building on the replacements already applied by the previous ones.</p>
<p>We can't simply use replace statements on immutable strings to do this : we would need to allocate new strings for each replacement at each level, and this would put a high load on the garbage collector.</p>
<p>A better solution is to implement our normalization function as a chain of iterators on chars.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">itertools</span>

<span class="k">def</span> <span class="nf">ignorechars</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">charset</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
            
<span class="k">def</span> <span class="nf">replacechars1to1</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">chardict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
            
<span class="k">def</span> <span class="nf">replacechars1toN</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">chardict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]:</span>
                <span class="k">yield</span> <span class="n">outchar</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">char</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">replaceWin1252ErrorChars</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1to1</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">win1252errorchars</span><span class="p">)</span>
<span class="n">ignoreControlChars</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">ignorechars</span><span class="p">,</span> <span class="n">charset</span><span class="o">=</span><span class="n">controlchars</span><span class="p">)</span>
<span class="n">replaceLatinLettersSymbols</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">latinlettersnolayout</span><span class="p">)</span>
<span class="n">replaceLatinLettersLigatures</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">latinlettersnoligatures</span><span class="p">)</span>
<span class="n">replaceLatinNumbersSymbols</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">latinnumbersnolayout</span><span class="p">)</span>
<span class="n">replaceNormalizedChars</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1to1</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">normalizedchars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">testString</span> <span class="o">=</span> <span class="s2">&quot;ABCabcd&quot;</span>

<span class="n">ignoreSet</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>            
<span class="n">ignoreAs</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">ignorechars</span><span class="p">,</span> <span class="n">charset</span><span class="o">=</span><span class="n">ignoreSet</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">ignoreAs</span><span class="p">(</span><span class="n">testString</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

<span class="n">replace1to1Dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;x&#39;</span><span class="p">}</span>
<span class="n">replaceAs</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1to1</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">replace1to1Dict</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">replaceAs</span><span class="p">(</span><span class="n">testString</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

<span class="n">replace1toNDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="s1">&#39;XY&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;xyz&#39;</span><span class="p">}</span>
<span class="n">replaceBs</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="n">chardict</span><span class="o">=</span><span class="n">replace1toNDict</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">replaceBs</span><span class="p">(</span><span class="n">testString</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>BCbcd
XBCxbcd
AXYCaxyzcd
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To match several chars in an iterator, we have to build a hierarchical dictionary structure.</p>
<p>For example, if we want to implement the following replacements :</p>

<pre><code>ABC =&gt; 1
ABD =&gt; 2
AC  =&gt; 3
BC  =&gt; 4</code></pre>
<p>We build the following dictionary structure :</p>

<pre><code>A : { B : { C : 1
            D : 2

      C : 3 }

B : { C : 4 }</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">buildhierarchicaldict</span><span class="p">(</span><span class="n">idict</span><span class="p">):</span>
    <span class="n">hdict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">odicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">idict</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">firstchar</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">remainingstring</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">firstchar</span> <span class="ow">in</span> <span class="n">hdict</span><span class="p">:</span>
                <span class="n">newdict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">hdict</span><span class="p">[</span><span class="n">firstchar</span><span class="p">]</span> <span class="o">=</span> <span class="n">newdict</span>
                <span class="n">odicts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">firstchar</span><span class="p">,</span><span class="n">newdict</span><span class="p">))</span>
            <span class="n">hdict</span><span class="p">[</span><span class="n">firstchar</span><span class="p">][</span><span class="n">remainingstring</span><span class="p">]</span> <span class="o">=</span> <span class="n">idict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">pkey</span><span class="p">,</span><span class="n">odict</span> <span class="ow">in</span> <span class="n">odicts</span><span class="p">:</span> 
        <span class="n">dictwithlongkey</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">odict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">dictwithlongkey</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">dictwithlongkey</span><span class="p">:</span>
            <span class="n">hdict</span><span class="p">[</span><span class="n">pkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">odict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hdict</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">utf8errorshdict</span> <span class="o">=</span> <span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">utf8errorchars</span><span class="p">)</span>
<span class="c1"># utf8errorshdict</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">combiningcharshdict</span> <span class="o">=</span> <span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">combiningchars</span><span class="p">)</span>
<span class="c1">#combiningcharshdict</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">replacecharsNto1</span><span class="p">(</span><span class="n">chariterator</span><span class="p">,</span> <span class="n">hierarchicaldict</span><span class="p">):</span>
    <span class="n">candidatechars</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">candidatedicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chariterator</span><span class="p">:</span>
        <span class="c1"># Try to match previously started patterns</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>    
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">candidatedict</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">candidatedicts</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">candidatedict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">candidatedict</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">candidatedict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
                            <span class="n">candidatedicts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                        <span class="k">else</span><span class="p">:</span>   
                            <span class="c1"># Success : found a char to return</span>
                            <span class="k">for</span> <span class="n">ridx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">idx</span><span class="p">):</span>
                                <span class="k">yield</span> <span class="n">candidatechars</span><span class="p">[</span><span class="n">ridx</span><span class="p">]</span>
                            <span class="n">candidatechars</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="n">candidatedicts</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="n">char</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">yield</span> <span class="n">value</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>   
                        <span class="n">candidatedicts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># Clean oldest failed attemps and return accumulated chars           </span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatedicts</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">candidatedicts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">candidatedicts</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                  
                <span class="k">yield</span> <span class="n">candidatechars</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Handle the current char     </span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">hierarchicaldict</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">hierarchicaldict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
                        <span class="n">candidatechars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
                        <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">candidatechars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">hierarchicaldict</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">hierarchicaldict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                    <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">replaceUtf8Errors</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacecharsNto1</span><span class="p">,</span> <span class="n">hierarchicaldict</span><span class="o">=</span><span class="n">utf8errorshdict</span><span class="p">)</span>
<span class="n">replaceCombiningChars</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacecharsNto1</span><span class="p">,</span> <span class="n">hierarchicaldict</span><span class="o">=</span><span class="n">combiningcharshdict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">testString</span> <span class="o">=</span> <span class="s2">&quot;XABCDEFDXYEZ&quot;</span>

<span class="n">hdict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;C&quot;</span><span class="p">:</span><span class="s1">&#39;1&#39;</span><span class="p">}},</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;C&quot;</span><span class="p">:</span><span class="s1">&#39;2&#39;</span><span class="p">},</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;D&quot;</span><span class="p">:</span><span class="s1">&#39;3&#39;</span><span class="p">},</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;E&quot;</span><span class="p">:</span><span class="s1">&#39;4&#39;</span><span class="p">},</span> <span class="s2">&quot;E&quot;</span><span class="p">:</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">:</span><span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Y&quot;</span><span class="p">:</span><span class="s1">&#39;0&#39;</span><span class="p">}</span> <span class="p">}</span> <span class="c1"># , &quot;A&quot;:&#39;9&#39;</span>
<span class="n">replaceTest</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">replacecharsNto1</span><span class="p">,</span> <span class="n">hierarchicaldict</span><span class="o">=</span><span class="n">hdict</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">replaceTest</span><span class="p">(</span><span class="n">testString</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>X146D05Z
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Unicode-normalization-pipeline">Unicode normalization pipeline<a class="anchor-link" href="#Unicode-normalization-pipeline">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="o">*</span><span class="n">functions</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">compose2</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">compose2</span><span class="p">,</span> <span class="n">functions</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">tostring</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">unicodeNorm</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span><span class="n">tostring</span><span class="p">,</span> <span class="n">replaceNormalizedChars</span><span class="p">,</span> <span class="n">replaceLatinNumbersSymbols</span><span class="p">,</span> <span class="n">replaceLatinLettersLigatures</span><span class="p">,</span> <span class="n">replaceLatinLettersSymbols</span><span class="p">,</span> <span class="n">ignoreControlChars</span><span class="p">,</span> <span class="n">replaceCombiningChars</span><span class="p">,</span> <span class="n">replaceUtf8Errors</span><span class="p">,</span> <span class="n">replaceWin1252ErrorChars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">teststring</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">127995</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;① l`&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">156</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;uv&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">127</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;re est¨ &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">147</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;belle&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">148</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;¸ Ã  Â½ â‚¬ énième â€° &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">133</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; ⁽🇪ﬃc🇦ce⁾ ！&quot;</span>
<span class="n">teststring</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;🏻① l`\x9cuv\x7fre est¨ \x93belle\x94¸ Ã\xa0\xa0Â½ â‚¬ énième â€° \x85 ⁽🇪ﬃc🇦ce⁾ ！&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#[(ord(char),char) for char in unicodeNorm(teststring)]</span>
<span class="n">unicodeNorm</span><span class="p">(</span><span class="n">teststring</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;(1) l&#39;oeuvre est «belle», à 1/2 € énième ‰ … (EfficAce) !&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.2-Normalization-class-with-change-tracking">2.2 Normalization class with change tracking<a class="anchor-link" href="#2.2-Normalization-class-with-change-tracking">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>

    
<span class="k">class</span> <span class="nc">TextNormalizer</span><span class="p">():</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rootdir</span><span class="p">):</span>
        
        <span class="c1"># 1. Load Unicode character set data for latin script</span>
        <span class="n">chardatadir</span> <span class="o">=</span> <span class="n">rootdir</span> <span class="o">/</span> <span class="s2">&quot;libdata&quot;</span> <span class="o">/</span> <span class="s2">&quot;chars&quot;</span>
        <span class="c1"># 1.1 Frequent encoding errors : windows1252 read as iso8859-1</span>
        <span class="n">dfencodingwin1252</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;windows1252-iso8859-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">win1252errorchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfencodingwin1252</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">win1252errorchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;DecodedChar&quot;</span><span class="p">]</span>
        <span class="c1"># 1.2 Frequent encoding errors : utf8 read as windows1252</span>
        <span class="n">dfencodingutf8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;utf8-windows1252-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">utf8errorchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfencodingutf8</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">utf8errorchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;ErrorSubstring&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;DecodedChar&quot;</span><span class="p">]</span>
        <span class="n">utf8errorshdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">utf8errorchars</span><span class="p">)</span>
        <span class="c1"># 1.3 Frequent encoding errors : windows1252 read as utf8</span>
        <span class="n">dfencodingwin1252utf8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;windows1252-utf8-errors.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">win1252utf8errorchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfencodingwin1252utf8</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">win1252utf8errorchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;DecodedChars&quot;</span><span class="p">]</span>
        <span class="c1"># 1.4 Unicode combining chars</span>
        <span class="n">dfcombiningchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;combiningdiacritics.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">combiningchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfcombiningchars</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">combiningchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;BaseChar&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;CombinedChar&quot;</span><span class="p">]</span>
        <span class="n">combiningcharshdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">combiningchars</span><span class="p">)</span>
        <span class="c1"># 1.5 Control chars</span>
        <span class="n">dfcontrolchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;controlchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">dfcontrolchars</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># chr(0) can&#39;t be saved in CSV file</span>
        <span class="n">controlchars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">dfcontrolchars</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">])</span>
        <span class="c1"># 1.6 Latin letter symbols</span>
        <span class="n">dflatinsymbols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinsymbols.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">latinlettersnolayout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">latinlettersremovedlayout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinsymbols</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">latinlettersnolayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormString&quot;</span><span class="p">]</span>
            <span class="n">latinlettersremovedlayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Layout&quot;</span><span class="p">]</span>
        <span class="c1"># 1.7 Latin letters</span>
        <span class="n">dflatinletters</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinletters.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">latinletterstoupper</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;UpperChar&quot;</span><span class="p">]:</span>
                <span class="n">latinletterstoupper</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;UpperChar&quot;</span><span class="p">]</span>
        <span class="n">latinlettersnodiacritics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">latinlettersremoveddiacritics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;IsDiacritic&quot;</span><span class="p">]:</span>
                <span class="n">latinlettersnodiacritics</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;BaseChar&quot;</span><span class="p">]</span>
                <span class="n">latinlettersremoveddiacritics</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Diacritics&quot;</span><span class="p">]</span>
        <span class="n">latinlettersnoligatures</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinletters</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;IsLigature&quot;</span><span class="p">]:</span>
                <span class="n">latinlettersnoligatures</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;MultiChars&quot;</span><span class="p">]</span>
        <span class="c1"># 1.8 Latin numbers and number symbols</span>
        <span class="n">dflatinnumbers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;latinnumbers.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">latinnumbersnolayout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">latinnumbersremovedlayout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dflatinnumbers</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">rowidx</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">latinnumbersnolayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormString&quot;</span><span class="p">]</span>
            <span class="n">latinnumbersremovedlayout</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Layout&quot;</span><span class="p">]</span>
        <span class="c1"># 1.9 Variations on frequent chars to normalize</span>
        <span class="n">dfnormchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;normalizedchars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">normalizedchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfnormchars</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">normalizedchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormChar&quot;</span><span class="p">]</span>
        <span class="c1"># 1.10 Optional replacement of cyrillic and greek chars looking like latin letters</span>
        <span class="n">dfcgnormchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;cyrillic-greek-chars.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">cgnormalizedchars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">rowidx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dfcgnormchars</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">cgnormalizedchars</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;NormChar&quot;</span><span class="p">]</span>
        <span class="c1"># 1.11 Final supported french charset</span>
        <span class="n">dfsupportedchars</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;charset-fr.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
        <span class="n">dfsupportedchars</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># chr(0) can&#39;t be saved in CSV file</span>
        <span class="n">supportedchars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">dfsupportedchars</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">])</span>
    
        <span class="c1"># 2.1 List successive transformations    </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">transforms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Fix encoding errors : windows1252 read as iso8859-1&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1to1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">win1252errorchars</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Fix encoding errors : utf8 read as windows1252&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacecharsNto1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">utf8errorshdict</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Fix encoding errors :  windows1252 read as utf8&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">win1252utf8errorchars</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Merge Unicode combining chars&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacecharsNto1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">combiningcharshdict</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Ignore control chars&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignorechars</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">controlchars</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace latin letter symbols&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">latinlettersnolayout</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace latin letter ligatures&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">latinlettersnoligatures</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace latin number symbols&quot;</span><span class="p">)</span>
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1toN</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">latinnumbersnolayout</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Normalize equivalent chars&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1to1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">normalizedchars</span><span class="p">))</span>   
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace cyrillic and greek chars looking like latin letters&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacechars1to1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span> <span class="n">cgnormalizedchars</span><span class="p">))</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace infrequent chars : latin letters with diacritics&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacecharsnotinset</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">supportedchars</span><span class="p">,</span> <span class="n">latinlettersnodiacritics</span><span class="p">))</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace infrequent chars : other scripts&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replaceotherscripts</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="n">supportedchars</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace infrequent chars : symbols&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replacesymbols</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">supportedchars</span><span class="p">))</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Replace infrequent chars : chars to ignore&quot;</span><span class="p">)</span> 
        <span class="n">transforms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignoreotherchars</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">supportedchars</span><span class="p">))</span>        
        
        <span class="c1"># 2.2 Combine all transformations</span>
        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
            <span class="n">ci</span> <span class="o">=</span> <span class="n">transforms</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">transform</span> <span class="ow">in</span> <span class="n">transforms</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">ci</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">ci</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ci</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformsFunc</span> <span class="o">=</span> <span class="n">func</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">transformDesc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="p">):</span>
            <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;{idx+1} - </span><span class="si">{transformDesc}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">desc</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputText</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">NormResult</span><span class="p">(</span><span class="n">inputText</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformsDescs</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transformsFunc</span><span class="p">(</span><span class="n">inputText</span><span class="p">,</span><span class="n">result</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">buildhierarchicaldict</span><span class="p">(</span><span class="n">idict</span><span class="p">):</span>
        <span class="n">hdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">odicts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">idict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">firstchar</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">remainingstring</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">firstchar</span> <span class="ow">in</span> <span class="n">hdict</span><span class="p">:</span>
                    <span class="n">newdict</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">hdict</span><span class="p">[</span><span class="n">firstchar</span><span class="p">]</span> <span class="o">=</span> <span class="n">newdict</span>
                    <span class="n">odicts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">firstchar</span><span class="p">,</span><span class="n">newdict</span><span class="p">))</span>
                <span class="n">hdict</span><span class="p">[</span><span class="n">firstchar</span><span class="p">][</span><span class="n">remainingstring</span><span class="p">]</span> <span class="o">=</span> <span class="n">idict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">pkey</span><span class="p">,</span><span class="n">odict</span> <span class="ow">in</span> <span class="n">odicts</span><span class="p">:</span> 
            <span class="n">dictwithlongkey</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">odict</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">dictwithlongkey</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">dictwithlongkey</span><span class="p">:</span>
                <span class="n">hdict</span><span class="p">[</span><span class="n">pkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">TextNormalizer</span><span class="o">.</span><span class="n">buildhierarchicaldict</span><span class="p">(</span><span class="n">odict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hdict</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ignorechars</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>  
    <span class="k">def</span> <span class="nf">replacechars1to1</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">chardict</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
                <span class="n">resChar</span> <span class="o">=</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">resChar</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">resChar</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>

    <span class="nd">@staticmethod</span>  
    <span class="k">def</span> <span class="nf">replacechars1toN</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">chardict</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chardict</span><span class="p">:</span>
                <span class="n">resStr</span> <span class="o">=</span> <span class="n">chardict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">resStr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">resStr</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">outchar</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">replacecharsNto1</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">hierarchicaldict</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="n">candidatechars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">candidatedicts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="c1"># Try to match previously started patterns</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>    
                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">candidatedict</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">candidatedicts</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">candidatedict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">candidatedict</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="n">candidatedict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
                                <span class="n">candidatedicts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                            <span class="k">else</span><span class="p">:</span>   
                                <span class="c1"># Success : found a char to return</span>
                                <span class="k">for</span> <span class="n">ridx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">idx</span><span class="p">):</span>
                                    <span class="k">yield</span> <span class="n">candidatechars</span><span class="p">[</span><span class="n">ridx</span><span class="p">]</span>
                                <span class="n">replacedStr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">[</span><span class="n">idx</span><span class="p">:])</span> <span class="o">+</span> <span class="n">char</span>
                                <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">replacedStr</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">replacedStr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                                <span class="n">candidatechars</span> <span class="o">=</span> <span class="p">[]</span>
                                <span class="n">candidatedicts</span> <span class="o">=</span> <span class="p">[]</span>
                                <span class="n">char</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">yield</span> <span class="n">value</span>
                                <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>   
                            <span class="n">candidatedicts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># Clean oldest failed attemps and return accumulated chars           </span>
                <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatedicts</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">candidatedicts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">candidatedicts</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                  
                    <span class="k">yield</span> <span class="n">candidatechars</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Handle the current char  </span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">hierarchicaldict</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">hierarchicaldict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
                            <span class="n">candidatechars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
                            <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">value</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">char</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">candidatechars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">hierarchicaldict</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">hierarchicaldict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                        <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">candidatedicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>     
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidatechars</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">candidatechars</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">replacecharsnotinset</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">charset</span><span class="p">,</span> <span class="n">replacedict</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">replacedict</span><span class="p">:</span>
                    <span class="n">resChar</span> <span class="o">=</span> <span class="n">replacedict</span><span class="p">[</span><span class="n">char</span><span class="p">]</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">resChar</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">resChar</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">char</span>            
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">replaceotherscripts</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">family</span> <span class="o">=</span> <span class="n">blockfamily</span><span class="p">(</span><span class="n">charblock</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">family</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Symbols&quot;</span><span class="p">,</span><span class="s2">&quot;Ignore&quot;</span><span class="p">):</span>
                    <span class="n">resStr</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">65532</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">resStr</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">resStr</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">outchar</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">char</span>           
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">replacesymbols</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">family</span> <span class="o">=</span> <span class="n">blockfamily</span><span class="p">(</span><span class="n">charblock</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">family</span> <span class="o">==</span> <span class="s2">&quot;Symbols&quot;</span><span class="p">:</span>
                    <span class="n">resStr</span> <span class="o">=</span><span class="s1">&#39;$&#39;</span> <span class="o">+</span> <span class="n">charname</span><span class="p">(</span><span class="n">char</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">resStr</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">outchar</span> <span class="ow">in</span> <span class="n">resStr</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">outchar</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">char</span>          
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ignoreotherchars</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">charset</span><span class="p">,</span> <span class="n">chariterator</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">char</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chariterator</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">charset</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">char</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">family</span> <span class="o">=</span> <span class="n">blockfamily</span><span class="p">(</span><span class="n">charblock</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">family</span> <span class="o">==</span> <span class="s2">&quot;Ignore&quot;</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">addChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">char</span>            
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">tostring</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    
    
<span class="k">class</span> <span class="nc">NormResult</span><span class="p">():</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputText</span><span class="p">,</span> <span class="n">transformsDescs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">inputText</span><span class="p">,</span> <span class="n">transformsDescs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">addChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">charsInput</span><span class="p">,</span> <span class="n">charsOutput</span><span class="p">,</span> <span class="n">removedInfo</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">layer</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">layer</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
        <span class="n">change</span> <span class="o">=</span> <span class="n">NormChange</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">charsInput</span><span class="p">,</span><span class="n">charsOutput</span><span class="p">,</span><span class="n">removedInfo</span><span class="p">)</span>
        <span class="n">changes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">change</span><span class="p">)</span>   
        
    <span class="k">def</span> <span class="nf">describeChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;No change&#39;</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
            <span class="n">previousString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span>
            <span class="k">for</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="p">:</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">changes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">layer</span>
                <span class="n">layerDesc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">layerDesc</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>                
                <span class="n">dispInparts</span> <span class="o">=</span> <span class="p">[]</span>     
                <span class="n">outparts</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">dispOutparts</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">lastIndex</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">change</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;</span> <span class="n">lastIndex</span><span class="p">:</span>
                        <span class="n">samePart</span> <span class="o">=</span> <span class="n">previousString</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">:</span><span class="n">change</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
                        <span class="n">dispInparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span>
                        <span class="n">outparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span>
                        <span class="n">dispOutparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span> 
                    <span class="n">dispInpart</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">input</span>
                    <span class="n">outpart</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">output</span>
                    <span class="n">dispOutpart</span> <span class="o">=</span> <span class="n">outpart</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dispInpart</span><span class="p">)</span><span class="o">&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">outpart</span><span class="p">):</span>
                        <span class="n">dispOutpart</span> <span class="o">=</span> <span class="n">outpart</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dispInpart</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">outpart</span><span class="p">)))</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">outpart</span><span class="p">)</span><span class="o">&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">dispInpart</span><span class="p">):</span>
                        <span class="n">dispInpart</span> <span class="o">=</span> <span class="n">dispInpart</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outpart</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">dispInpart</span><span class="p">)))</span>
                    <span class="n">dispInparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; [&#39;</span><span class="o">+</span><span class="n">dispInpart</span><span class="o">+</span><span class="s1">&#39;] &#39;</span><span class="p">)</span>
                    <span class="n">outparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outpart</span><span class="p">)</span>
                    <span class="n">dispOutparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; [&#39;</span><span class="o">+</span><span class="n">dispOutpart</span><span class="o">+</span><span class="s1">&#39;] &#39;</span><span class="p">)</span>
                    <span class="n">lastIndex</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lastIndex</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">previousString</span><span class="p">):</span>
                    <span class="n">samePart</span> <span class="o">=</span> <span class="n">previousString</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">:]</span>
                    <span class="n">dispInparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span>
                    <span class="n">outparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span>
                    <span class="n">dispOutparts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samePart</span><span class="p">)</span>
                <span class="n">previousString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outparts</span><span class="p">)</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot; &lt; &quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">inpart</span> <span class="ow">in</span> <span class="n">dispInparts</span><span class="p">:</span>
                    <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">inpart</span><span class="p">)</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot; &lt; &quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">outpart</span> <span class="ow">in</span> <span class="n">dispOutparts</span><span class="p">:</span>
                    <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outpart</span><span class="p">)</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">desc</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
            
    <span class="k">def</span> <span class="nf">mapOutputIndexToInput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">outputIndex</span><span class="p">):</span>
        <span class="n">inputIndex</span> <span class="o">=</span> <span class="n">outputIndex</span>
        <span class="k">for</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layerChanges</span><span class="p">:</span>
            <span class="n">outputIndex</span> <span class="o">=</span> <span class="n">inputIndex</span>
            <span class="k">for</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">outputIndex</span> <span class="o">&lt;</span> <span class="n">change</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">elif</span> <span class="n">outputIndex</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">output</span><span class="p">)):</span>
                    <span class="n">inputIndex</span> <span class="o">=</span> <span class="n">inputIndex</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">input</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">output</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">inputIndex</span> <span class="o">=</span> <span class="n">inputIndex</span> <span class="o">-</span><span class="p">(</span><span class="n">outputIndex</span><span class="o">-</span><span class="n">change</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">inputIndex</span>        
            
    <span class="k">def</span> <span class="nf">setOutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outputText</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">outputText</span>
        
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span>
    
<span class="k">class</span> <span class="nc">NormChange</span><span class="p">():</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">charsInput</span><span class="p">,</span> <span class="n">charsOutput</span><span class="p">,</span> <span class="n">removedInfo</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">removedInfo</span> <span class="o">=</span> <span class="n">layer</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">charsInput</span><span class="p">,</span> <span class="n">charsOutput</span><span class="p">,</span> <span class="n">removedInfo</span>
        
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{self.layer}</span><span class="s2"> - </span><span class="si">{self.index}</span><span class="s2"> : </span><span class="si">{self.input}</span><span class="s2"> =&gt; </span><span class="si">{self.output}</span><span class="s2">&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">time</span> norm = TextNormalizer(rootdir)
<span class="n">norm</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Wall time: 1.35 s
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1 - Fix encoding errors : windows1252 read as iso8859-1
2 - Fix encoding errors : utf8 read as windows1252
3 - Fix encoding errors :  windows1252 read as utf8
4 - Merge Unicode combining chars
5 - Ignore control chars
6 - Replace latin letter symbols
7 - Replace latin letter ligatures
8 - Replace latin number symbols
9 - Normalize equivalent chars
10 - Replace cyrillic and greek chars looking like latin letters
11 - Replace infrequent chars : latin letters with diacritics
12 - Replace infrequent chars : other scripts
13 - Replace infrequent chars : symbols
14 - Replace infrequent chars : chars to ignore</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">teststring</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">127995</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;① l`&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">156</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;uv&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">127</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;re est¨ &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">147</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;belle&quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">148</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;¸ Ã  Â½ â‚¬ énième â€° &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">133</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; ⁽🇪ﬃc🇦ce⁾ ！&quot;</span>
<span class="n">teststring</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;🏻① l`\x9cuv\x7fre est¨ \x93belle\x94¸ Ã  Â½ â‚¬ énième â€° \x85 ⁽🇪ﬃc🇦ce⁾ ！&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">teststring</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(1) l&#39;oeuvre est «belle», Ã  1/2 € énième ‰ … (EfficAce) !</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">describeChanges</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">IndexError</span>                                Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-49-760a7bcb109e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>print<span class="ansi-yellow-intense-fg ansi-bold">(</span>result<span class="ansi-yellow-intense-fg ansi-bold">.</span>describeChanges<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-45-aeb14947952b&gt;</span> in <span class="ansi-cyan-fg">describeChanges</span><span class="ansi-blue-intense-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    325</span>             previousString <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>input
<span class="ansi-green-fg">    326</span>             <span class="ansi-green-intense-fg ansi-bold">for</span> changes <span class="ansi-green-intense-fg ansi-bold">in</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>layerChanges<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 327</span><span class="ansi-yellow-intense-fg ansi-bold">                 </span>layer <span class="ansi-yellow-intense-fg ansi-bold">=</span> changes<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>layer
<span class="ansi-green-fg">    328</span>                 layerDesc <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>transforms<span class="ansi-yellow-intense-fg ansi-bold">[</span>layer<span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-fg">    329</span>                 desc<span class="ansi-yellow-intense-fg ansi-bold">.</span>write<span class="ansi-yellow-intense-fg ansi-bold">(</span>layerDesc<span class="ansi-yellow-intense-fg ansi-bold">+</span><span class="ansi-blue-intense-fg ansi-bold">&#34;\n&#34;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-red-intense-fg ansi-bold">IndexError</span>: list index out of range</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">12</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;(1) l&#39;oeuvre&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">12</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;🏻① l`\x9cuv\x7fre&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34; l&#39;oeuv&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span><span class="n">result</span><span class="o">.</span><span class="n">mapOutputIndexToInput</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39; l`\x9cuv\x7f&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> -n100 norm(teststring)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>197 µs ± 19.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3.-Explore-french-dataset-characters">3. Explore french dataset characters<a class="anchor-link" href="#3.-Explore-french-dataset-characters">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.1-Characters-frequency-in-french-datasets">3.1 Characters frequency in french datasets<a class="anchor-link" href="#3.1-Characters-frequency-in-french-datasets">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharstats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;charsetstats_raw.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcharstats</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>3.503992e+09</td>
      <td>4.595437e+09</td>
      <td>8.099428e+09</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>115</td>
      <td>s</td>
      <td>Latin Small Letter S</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.960554e+09</td>
      <td>2.534105e+09</td>
      <td>4.494658e+09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>97</td>
      <td>a</td>
      <td>Latin Small Letter A</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.865590e+09</td>
      <td>2.447239e+09</td>
      <td>4.312829e+09</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>110</td>
      <td>n</td>
      <td>Latin Small Letter N</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.819350e+09</td>
      <td>2.388609e+09</td>
      <td>4.207959e+09</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>105</td>
      <td>i</td>
      <td>Latin Small Letter I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.766427e+09</td>
      <td>2.331461e+09</td>
      <td>4.097888e+09</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.2-Characters-stats-in-Wikipedia-dataset">3.2 Characters stats in Wikipedia dataset<a class="anchor-link" href="#3.2-Characters-stats-in-Wikipedia-dataset">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>35.6 billion chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charsCountWikipedia</span> <span class="o">=</span> <span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">charsCountWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>35682395281.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>13 502 distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">distinctCharsWikipedia</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">])</span>
<span class="n">distinctCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>13502</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Only 1316 chars more frequent than 1 in 100 million</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">frequentCharsWikipedia</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">356</span><span class="p">])</span>
<span class="n">frequentCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1316</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Frequent chars represent 9.7 % of all distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctFreqCharsWikipedia</span> <span class="o">=</span> <span class="n">frequentCharsWikipedia</span><span class="o">/</span><span class="n">distinctCharsWikipedia</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctFreqCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>9.74670419197156</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.9987 % of Wikipedia chars would be preserved if we only kept the frequent chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedCharsWikipedia</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">356</span><span class="p">][</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedCharsWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.99871204274157</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.3-Characters-stats-in-Business-dataset">3.3 Characters stats in Business dataset<a class="anchor-link" href="#3.3-Characters-stats-in-Business-dataset">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>27.5 billion chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">charsCountBusiness</span> <span class="o">=</span> <span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">charsCountBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>27577304956.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>3 763 distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">distinctCharsBusiness</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">])</span>
<span class="n">distinctCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>3763</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Only 531 chars more frequent than 1 in 100 million</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">frequentCharsBusiness</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">275</span><span class="p">])</span>
<span class="n">frequentCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>531</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Frequent chars represent 14.1 % of all distinct Unicode chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctFreqCharsBusiness</span> <span class="o">=</span> <span class="n">frequentCharsBusiness</span><span class="o">/</span><span class="n">distinctCharsBusiness</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctFreqCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>14.11108158384268</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.9996 % of Business chars would be preserved if we only kept the frequent chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedCharsBusiness</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">275</span><span class="p">][</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedCharsBusiness</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.9996564385093</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>99.985 % of Wikipedia chars would be preserved if we only kept the frequent Business chars</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pctPreservedBizCharsInWikipedia</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">dfcharstats</span><span class="p">[</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">275</span><span class="p">][</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">dfcharstats</span><span class="p">[</span><span class="s2">&quot;CountWikipedia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">pctPreservedBizCharsInWikipedia</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>99.9848317525845</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.4-Character-stats-after-Unicode-normalization">3.4 Character stats after Unicode normalization<a class="anchor-link" href="#3.4-Character-stats-after-Unicode-normalization">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharsnorm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">chardatadir</span> <span class="o">/</span> <span class="s2">&quot;charsetstats_norm.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">dfcharsnorm</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dfcharsnorm</span><span class="p">[</span><span class="s2">&quot;IsLatinLetter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfcharsnorm</span><span class="p">[</span><span class="s2">&quot;Char&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">latinletters</span><span class="p">)</span>
<span class="n">dfcharsnorm</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>3.504972e+09</td>
      <td>4.598059e+09</td>
      <td>8.103030e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>115</td>
      <td>s</td>
      <td>Latin Small Letter S</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.960554e+09</td>
      <td>2.534105e+09</td>
      <td>4.494659e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>97</td>
      <td>a</td>
      <td>Latin Small Letter A</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.865560e+09</td>
      <td>2.447291e+09</td>
      <td>4.312851e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>110</td>
      <td>n</td>
      <td>Latin Small Letter N</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.819350e+09</td>
      <td>2.388609e+09</td>
      <td>4.207959e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>105</td>
      <td>i</td>
      <td>Latin Small Letter I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.766427e+09</td>
      <td>2.331462e+09</td>
      <td>4.097890e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>6188</th>
      <td>6188</td>
      <td>32490</td>
      <td>绪</td>
      <td>Cjk Unified Ideograph-7Eea</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>2.100000e+01</td>
      <td>2.100000e+01</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6189</th>
      <td>6189</td>
      <td>11397</td>
      <td>ⲅ</td>
      <td>Coptic Small Letter Gamma</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Coptic</td>
      <td>0.000000e+00</td>
      <td>1.900000e+01</td>
      <td>1.900000e+01</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6190</th>
      <td>6190</td>
      <td>66466</td>
      <td>𐎢</td>
      <td>Old Persian Sign U</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Old Persian</td>
      <td>0.000000e+00</td>
      <td>1.900000e+01</td>
      <td>1.900000e+01</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6191</th>
      <td>6191</td>
      <td>2537</td>
      <td>৩</td>
      <td>Bengali Digit Three</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Bengali</td>
      <td>0.000000e+00</td>
      <td>2.200000e+01</td>
      <td>2.200000e+01</td>
      <td>False</td>
    </tr>
    <tr>
      <th>13122</th>
      <td>13122</td>
      <td>23072</td>
      <td>娠</td>
      <td>Cjk Unified Ideograph-5A20</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>0.000000e+00</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>13123 rows × 11 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Stats-for-the-character-families-after-normalization">Stats for the character families after normalization<a class="anchor-link" href="#Stats-for-the-character-families-after-normalization">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfblocks</span> <span class="o">=</span> <span class="n">dfcharsnorm</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">,</span><span class="s2">&quot;Category&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">dfblocks</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfblocks</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.75773e+10</span> <span class="o">*</span> <span class="mi">1000000</span>
<span class="n">dfblocks</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Block</th>
      <th>Category</th>
      <th>CountBusiness</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Basic Latin</td>
      <td>Letter</td>
      <td>881902.669297</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Basic Latin</td>
      <td>Punctuation</td>
      <td>46315.655485</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Basic Latin</td>
      <td>Number</td>
      <td>32711.158344</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Latin-1 Supplement</td>
      <td>Letter</td>
      <td>32478.404267</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Basic Latin</td>
      <td>Separator</td>
      <td>3208.964039</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Latin-1 Supplement</td>
      <td>Punctuation</td>
      <td>1299.564461</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Basic Latin</td>
      <td>Symbol</td>
      <td>712.644313</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Basic Latin</td>
      <td>Other</td>
      <td>402.874828</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Latin-1 Supplement</td>
      <td>Symbol</td>
      <td>333.857085</td>
    </tr>
    <tr>
      <th>9</th>
      <td>General Punctuation</td>
      <td>Punctuation</td>
      <td>216.378688</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Currency Symbols</td>
      <td>Symbol</td>
      <td>192.538972</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Dingbats</td>
      <td>Symbol</td>
      <td>14.373670</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Emoticons</td>
      <td>Symbol</td>
      <td>2.430441</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Cyrillic</td>
      <td>Letter</td>
      <td>2.312735</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>Symbol</td>
      <td>1.536264</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Arabic</td>
      <td>Letter</td>
      <td>1.088214</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Miscellaneous Symbols</td>
      <td>Symbol</td>
      <td>1.068596</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Latin Extended-A</td>
      <td>Letter</td>
      <td>0.952377</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Arrows</td>
      <td>Symbol</td>
      <td>0.544578</td>
    </tr>
    <tr>
      <th>19</th>
      <td>CJK Unified Ideographs</td>
      <td>Letter</td>
      <td>0.483731</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Frequent-characters-to-keep">Frequent characters to keep<a class="anchor-link" href="#Frequent-characters-to-keep">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharskeep</span> <span class="o">=</span> <span class="n">dfcharsnorm</span><span class="p">[</span><span class="n">dfcharsnorm</span><span class="p">[</span><span class="s2">&quot;CountBusiness&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">275</span><span class="p">]</span>
<span class="n">dfcharskeep</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>101</td>
      <td>e</td>
      <td>Latin Small Letter E</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>3.504972e+09</td>
      <td>4.598059e+09</td>
      <td>8.103030e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>115</td>
      <td>s</td>
      <td>Latin Small Letter S</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.960554e+09</td>
      <td>2.534105e+09</td>
      <td>4.494659e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>97</td>
      <td>a</td>
      <td>Latin Small Letter A</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.865560e+09</td>
      <td>2.447291e+09</td>
      <td>4.312851e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>110</td>
      <td>n</td>
      <td>Latin Small Letter N</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.819350e+09</td>
      <td>2.388609e+09</td>
      <td>4.207959e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>105</td>
      <td>i</td>
      <td>Latin Small Letter I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Basic Latin</td>
      <td>1.766427e+09</td>
      <td>2.331462e+09</td>
      <td>4.097890e+09</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>449</th>
      <td>449</td>
      <td>1102</td>
      <td>ю</td>
      <td>Cyrillic Small Letter Yu</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>2.790000e+02</td>
      <td>2.814000e+03</td>
      <td>3.093000e+03</td>
      <td>False</td>
    </tr>
    <tr>
      <th>414</th>
      <td>414</td>
      <td>8776</td>
      <td>≈</td>
      <td>Almost Equal To</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>2.780000e+02</td>
      <td>3.833000e+03</td>
      <td>4.111000e+03</td>
      <td>False</td>
    </tr>
    <tr>
      <th>868</th>
      <td>868</td>
      <td>129318</td>
      <td>🤦</td>
      <td>Face Palm</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>2.770000e+02</td>
      <td>1.900000e+02</td>
      <td>4.670000e+02</td>
      <td>False</td>
    </tr>
    <tr>
      <th>190</th>
      <td>190</td>
      <td>962</td>
      <td>ς</td>
      <td>Greek Small Letter Final Sigma</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>2.760000e+02</td>
      <td>2.787900e+04</td>
      <td>2.815500e+04</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1016</th>
      <td>1016</td>
      <td>129352</td>
      <td>🥈</td>
      <td>Second Place Medal</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>2.760000e+02</td>
      <td>4.250000e+02</td>
      <td>7.010000e+02</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>395 rows × 11 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;Letter&#39;, &#39;Punctuation&#39;, &#39;Number&#39;, &#39;Separator&#39;, &#39;Other&#39;, &#39;Symbol&#39;,
       &#39;Mark&#39;], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Latin letters</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_latinletters</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;IsLatinLetter&quot;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_latinletters</span><span class="p">))</span>
<span class="n">dfkeep_latinletters</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>127
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>135</th>
      <td>135</td>
      <td>241</td>
      <td>ñ</td>
      <td>Latin Small Letter N With Tilde</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>34910.0</td>
      <td>121216.0</td>
      <td>156126.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>124</th>
      <td>124</td>
      <td>243</td>
      <td>ó</td>
      <td>Latin Small Letter O With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>29186.0</td>
      <td>291813.0</td>
      <td>320999.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>162</th>
      <td>162</td>
      <td>214</td>
      <td>Ö</td>
      <td>Latin Capital Letter O With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>27400.0</td>
      <td>49366.0</td>
      <td>76766.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>123</th>
      <td>123</td>
      <td>237</td>
      <td>í</td>
      <td>Latin Small Letter I With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>26639.0</td>
      <td>311149.0</td>
      <td>337788.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>145</th>
      <td>145</td>
      <td>227</td>
      <td>ã</td>
      <td>Latin Small Letter A With Tilde</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>14743.0</td>
      <td>78217.0</td>
      <td>92960.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>218</th>
      <td>218</td>
      <td>207</td>
      <td>Ï</td>
      <td>Latin Capital Letter I With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>12459.0</td>
      <td>12984.0</td>
      <td>25443.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>229</th>
      <td>229</td>
      <td>203</td>
      <td>Ë</td>
      <td>Latin Capital Letter E With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>11456.0</td>
      <td>11277.0</td>
      <td>22733.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>184</th>
      <td>184</td>
      <td>219</td>
      <td>Û</td>
      <td>Latin Capital Letter U With Circumflex</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>9748.0</td>
      <td>8508.0</td>
      <td>18256.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>142</th>
      <td>142</td>
      <td>250</td>
      <td>ú</td>
      <td>Latin Small Letter U With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>8041.0</td>
      <td>78223.0</td>
      <td>86264.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>164</th>
      <td>164</td>
      <td>248</td>
      <td>ø</td>
      <td>Latin Small Letter O With Stroke</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>7548.0</td>
      <td>38132.0</td>
      <td>45680.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>216</th>
      <td>216</td>
      <td>255</td>
      <td>ÿ</td>
      <td>Latin Small Letter Y With Diaeresis</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>6855.0</td>
      <td>18545.0</td>
      <td>25400.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>258</th>
      <td>258</td>
      <td>220</td>
      <td>Ü</td>
      <td>Latin Capital Letter U With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>4478.0</td>
      <td>11447.0</td>
      <td>15925.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>296</th>
      <td>296</td>
      <td>279</td>
      <td>ė</td>
      <td>Latin Small Letter E With Dot Above</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>3920.0</td>
      <td>7409.0</td>
      <td>11329.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>180</th>
      <td>180</td>
      <td>229</td>
      <td>å</td>
      <td>Latin Small Letter A With Ring Above</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>2985.0</td>
      <td>27304.0</td>
      <td>30289.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>181</th>
      <td>181</td>
      <td>305</td>
      <td>ı</td>
      <td>Latin Small Letter Dotless I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>2566.0</td>
      <td>28346.0</td>
      <td>30912.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>178</th>
      <td>178</td>
      <td>193</td>
      <td>Á</td>
      <td>Latin Capital Letter A With Acute</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>2464.0</td>
      <td>27994.0</td>
      <td>30458.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>290</th>
      <td>290</td>
      <td>216</td>
      <td>Ø</td>
      <td>Latin Capital Letter O With Stroke</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>2197.0</td>
      <td>7645.0</td>
      <td>9842.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>354</th>
      <td>354</td>
      <td>196</td>
      <td>Ä</td>
      <td>Latin Capital Letter A With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>2140.0</td>
      <td>4882.0</td>
      <td>7022.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>143</th>
      <td>143</td>
      <td>353</td>
      <td>š</td>
      <td>Latin Small Letter S With Caron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>1977.0</td>
      <td>72820.0</td>
      <td>74797.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>223</th>
      <td>223</td>
      <td>287</td>
      <td>ğ</td>
      <td>Latin Small Letter G With Breve</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>1927.0</td>
      <td>14037.0</td>
      <td>15964.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>198</th>
      <td>198</td>
      <td>352</td>
      <td>Š</td>
      <td>Latin Capital Letter S With Caron</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin Extended-A</td>
      <td>1862.0</td>
      <td>18960.0</td>
      <td>20822.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>369</th>
      <td>369</td>
      <td>218</td>
      <td>Ú</td>
      <td>Latin Capital Letter U With Acute</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>1794.0</td>
      <td>4080.0</td>
      <td>5874.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>255</th>
      <td>255</td>
      <td>197</td>
      <td>Å</td>
      <td>Latin Capital Letter A With Ring Above</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>1682.0</td>
      <td>10397.0</td>
      <td>12079.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>328</th>
      <td>328</td>
      <td>217</td>
      <td>Ù</td>
      <td>Latin Capital Letter U With Grave</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>1681.0</td>
      <td>1819.0</td>
      <td>3500.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>192</th>
      <td>192</td>
      <td>242</td>
      <td>ò</td>
      <td>Latin Small Letter O With Grave</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>1574.0</td>
      <td>24791.0</td>
      <td>26365.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>138</th>
      <td>138</td>
      <td>263</td>
      <td>ć</td>
      <td>Latin Small Letter C With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>1376.0</td>
      <td>81490.0</td>
      <td>82866.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>171</th>
      <td>171</td>
      <td>223</td>
      <td>ß</td>
      <td>Latin Small Letter Sharp S</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>1351.0</td>
      <td>31682.0</td>
      <td>33033.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>220</th>
      <td>220</td>
      <td>236</td>
      <td>ì</td>
      <td>Latin Small Letter I With Grave</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>1323.0</td>
      <td>14666.0</td>
      <td>15989.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>306</th>
      <td>306</td>
      <td>402</td>
      <td>ƒ</td>
      <td>Latin Small Letter F With Hook</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-B</td>
      <td>1273.0</td>
      <td>2279.0</td>
      <td>3552.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>208</th>
      <td>208</td>
      <td>351</td>
      <td>ş</td>
      <td>Latin Small Letter S With Cedilla</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>1052.0</td>
      <td>16830.0</td>
      <td>17882.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>271</th>
      <td>271</td>
      <td>381</td>
      <td>Ž</td>
      <td>Latin Capital Letter Z With Caron</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin Extended-A</td>
      <td>1007.0</td>
      <td>7980.0</td>
      <td>8987.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>185</th>
      <td>185</td>
      <td>324</td>
      <td>ń</td>
      <td>Latin Small Letter N With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>967.0</td>
      <td>24081.0</td>
      <td>25048.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>155</th>
      <td>155</td>
      <td>269</td>
      <td>č</td>
      <td>Latin Small Letter C With Caron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>817.0</td>
      <td>47212.0</td>
      <td>48029.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>139</th>
      <td>139</td>
      <td>257</td>
      <td>ā</td>
      <td>Latin Small Letter A With Macron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>796.0</td>
      <td>92744.0</td>
      <td>93540.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>291</th>
      <td>291</td>
      <td>245</td>
      <td>õ</td>
      <td>Latin Small Letter O With Tilde</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>784.0</td>
      <td>6751.0</td>
      <td>7535.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>215</th>
      <td>215</td>
      <td>253</td>
      <td>ý</td>
      <td>Latin Small Letter Y With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>744.0</td>
      <td>14243.0</td>
      <td>14987.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>151</th>
      <td>151</td>
      <td>322</td>
      <td>ł</td>
      <td>Latin Small Letter L With Stroke</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>702.0</td>
      <td>52426.0</td>
      <td>53128.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>213</th>
      <td>213</td>
      <td>240</td>
      <td>ð</td>
      <td>Latin Small Letter Eth</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>671.0</td>
      <td>15015.0</td>
      <td>15686.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>566</th>
      <td>566</td>
      <td>376</td>
      <td>Ÿ</td>
      <td>Latin Capital Letter Y With Diaeresis</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin Extended-A</td>
      <td>590.0</td>
      <td>502.0</td>
      <td>1092.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>678</th>
      <td>678</td>
      <td>314</td>
      <td>ĺ</td>
      <td>Latin Small Letter L With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>588.0</td>
      <td>537.0</td>
      <td>1125.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>188</th>
      <td>188</td>
      <td>382</td>
      <td>ž</td>
      <td>Latin Small Letter Z With Caron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>575.0</td>
      <td>22997.0</td>
      <td>23572.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>129</th>
      <td>129</td>
      <td>333</td>
      <td>ō</td>
      <td>Latin Small Letter O With Macron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>561.0</td>
      <td>157424.0</td>
      <td>157985.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>256</th>
      <td>256</td>
      <td>211</td>
      <td>Ó</td>
      <td>Latin Capital Letter O With Acute</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>493.0</td>
      <td>8280.0</td>
      <td>8773.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>248</th>
      <td>248</td>
      <td>275</td>
      <td>ē</td>
      <td>Latin Small Letter E With Macron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>451.0</td>
      <td>10643.0</td>
      <td>11094.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>745</th>
      <td>745</td>
      <td>7497</td>
      <td>ᵉ</td>
      <td>Modifier Letter Small E</td>
      <td>Letter</td>
      <td>Modifier</td>
      <td>Phonetic Extensions</td>
      <td>439.0</td>
      <td>779.0</td>
      <td>1218.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>489</th>
      <td>489</td>
      <td>209</td>
      <td>Ñ</td>
      <td>Latin Capital Letter N With Tilde</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>420.0</td>
      <td>1855.0</td>
      <td>2275.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>221</th>
      <td>221</td>
      <td>347</td>
      <td>ś</td>
      <td>Latin Small Letter S With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>392.0</td>
      <td>13487.0</td>
      <td>13879.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>233</th>
      <td>233</td>
      <td>345</td>
      <td>ř</td>
      <td>Latin Small Letter R With Caron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>358.0</td>
      <td>10880.0</td>
      <td>11238.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>352</th>
      <td>352</td>
      <td>205</td>
      <td>Í</td>
      <td>Latin Capital Letter I With Acute</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Latin-1 Supplement</td>
      <td>352.0</td>
      <td>3955.0</td>
      <td>4307.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>914</th>
      <td>914</td>
      <td>341</td>
      <td>ŕ</td>
      <td>Latin Small Letter R With Acute</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin Extended-A</td>
      <td>283.0</td>
      <td>492.0</td>
      <td>775.0</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Numbers</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_numbers</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Number&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_numbers</span><span class="p">))</span>
<span class="n">dfkeep_numbers</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>10
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>18</th>
      <td>18</td>
      <td>48</td>
      <td>0</td>
      <td>Digit Zero</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>205900253.0</td>
      <td>203783618.0</td>
      <td>409683871.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>22</th>
      <td>22</td>
      <td>49</td>
      <td>1</td>
      <td>Digit One</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>182578174.0</td>
      <td>193454781.0</td>
      <td>376032955.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>23</th>
      <td>23</td>
      <td>50</td>
      <td>2</td>
      <td>Digit Two</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>150468456.0</td>
      <td>148890442.0</td>
      <td>299358898.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>37</th>
      <td>37</td>
      <td>51</td>
      <td>3</td>
      <td>Digit Three</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>63204503.0</td>
      <td>62978149.0</td>
      <td>126182652.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>38</th>
      <td>38</td>
      <td>53</td>
      <td>5</td>
      <td>Digit Five</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>61928962.0</td>
      <td>63015043.0</td>
      <td>124944005.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>42</th>
      <td>42</td>
      <td>52</td>
      <td>4</td>
      <td>Digit Four</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>54315896.0</td>
      <td>55117336.0</td>
      <td>109433232.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>47</th>
      <td>47</td>
      <td>57</td>
      <td>9</td>
      <td>Digit Nine</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>49659061.0</td>
      <td>64890554.0</td>
      <td>114549615.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>49</th>
      <td>49</td>
      <td>56</td>
      <td>8</td>
      <td>Digit Eight</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>45892947.0</td>
      <td>51573918.0</td>
      <td>97466865.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>52</th>
      <td>52</td>
      <td>55</td>
      <td>7</td>
      <td>Digit Seven</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>44417739.0</td>
      <td>48012755.0</td>
      <td>92430494.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>51</th>
      <td>51</td>
      <td>54</td>
      <td>6</td>
      <td>Digit Six</td>
      <td>Number</td>
      <td>Decimal Digit</td>
      <td>Basic Latin</td>
      <td>43719436.0</td>
      <td>46734704.0</td>
      <td>90454140.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Non latin scripts letters</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_otherscripts</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Letter&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;IsLatinLetter&quot;</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Latin-1 Supplement&quot;</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_otherscripts</span><span class="p">))</span>
<span class="n">dfkeep_otherscripts</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>88
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>152</th>
      <td>152</td>
      <td>1077</td>
      <td>е</td>
      <td>Cyrillic Small Letter Ie</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>6550.0</td>
      <td>69243.0</td>
      <td>75793.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>144</th>
      <td>144</td>
      <td>1072</td>
      <td>а</td>
      <td>Cyrillic Small Letter A</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>5945.0</td>
      <td>88915.0</td>
      <td>94860.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>146</th>
      <td>146</td>
      <td>1086</td>
      <td>о</td>
      <td>Cyrillic Small Letter O</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>5695.0</td>
      <td>79919.0</td>
      <td>85614.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>169</th>
      <td>169</td>
      <td>1090</td>
      <td>т</td>
      <td>Cyrillic Small Letter Te</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>4452.0</td>
      <td>40796.0</td>
      <td>45248.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>160</th>
      <td>160</td>
      <td>1575</td>
      <td>ا</td>
      <td>Arabic Letter Alef</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>4403.0</td>
      <td>60273.0</td>
      <td>64676.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>148</th>
      <td>148</td>
      <td>1080</td>
      <td>и</td>
      <td>Cyrillic Small Letter I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>3699.0</td>
      <td>75722.0</td>
      <td>79421.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>159</th>
      <td>159</td>
      <td>1085</td>
      <td>н</td>
      <td>Cyrillic Small Letter En</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>3115.0</td>
      <td>59369.0</td>
      <td>62484.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>163</th>
      <td>163</td>
      <td>1089</td>
      <td>с</td>
      <td>Cyrillic Small Letter Es</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>3020.0</td>
      <td>45943.0</td>
      <td>48963.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>161</th>
      <td>161</td>
      <td>1088</td>
      <td>р</td>
      <td>Cyrillic Small Letter Er</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>2953.0</td>
      <td>52739.0</td>
      <td>55692.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>312</th>
      <td>312</td>
      <td>38971</td>
      <td>頻</td>
      <td>Cjk Unified Ideograph-983B</td>
      <td>Letter</td>
      <td>Other</td>
      <td>CJK Unified Ideographs</td>
      <td>2562.0</td>
      <td>1830.0</td>
      <td>4392.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>173</th>
      <td>173</td>
      <td>1604</td>
      <td>ل</td>
      <td>Arabic Letter Lam</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>2427.0</td>
      <td>41122.0</td>
      <td>43549.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>168</th>
      <td>168</td>
      <td>1074</td>
      <td>в</td>
      <td>Cyrillic Small Letter Ve</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>2397.0</td>
      <td>40670.0</td>
      <td>43067.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>154</th>
      <td>154</td>
      <td>945</td>
      <td>α</td>
      <td>Greek Small Letter Alpha</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>2306.0</td>
      <td>62001.0</td>
      <td>64307.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>210</th>
      <td>210</td>
      <td>1084</td>
      <td>м</td>
      <td>Cyrillic Small Letter Em</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>2270.0</td>
      <td>19718.0</td>
      <td>21988.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>174</th>
      <td>174</td>
      <td>1083</td>
      <td>л</td>
      <td>Cyrillic Small Letter El</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>2102.0</td>
      <td>36667.0</td>
      <td>38769.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>205</th>
      <td>205</td>
      <td>1606</td>
      <td>ن</td>
      <td>Arabic Letter Noon</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>2079.0</td>
      <td>23291.0</td>
      <td>25370.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>201</th>
      <td>201</td>
      <td>1585</td>
      <td>ر</td>
      <td>Arabic Letter Reh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1948.0</td>
      <td>26638.0</td>
      <td>28586.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>199</th>
      <td>199</td>
      <td>1605</td>
      <td>م</td>
      <td>Arabic Letter Meem</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1882.0</td>
      <td>27698.0</td>
      <td>29580.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>172</th>
      <td>172</td>
      <td>1082</td>
      <td>к</td>
      <td>Cyrillic Small Letter Ka</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1663.0</td>
      <td>37919.0</td>
      <td>39582.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>200</th>
      <td>200</td>
      <td>1610</td>
      <td>ي</td>
      <td>Arabic Letter Yeh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1653.0</td>
      <td>27245.0</td>
      <td>28898.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>211</th>
      <td>211</td>
      <td>1608</td>
      <td>و</td>
      <td>Arabic Letter Waw</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1651.0</td>
      <td>21277.0</td>
      <td>22928.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>228</th>
      <td>228</td>
      <td>1103</td>
      <td>я</td>
      <td>Cyrillic Small Letter Ya</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1404.0</td>
      <td>15019.0</td>
      <td>16423.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>264</th>
      <td>264</td>
      <td>1493</td>
      <td>ו</td>
      <td>Hebrew Letter Vav</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>1331.0</td>
      <td>9922.0</td>
      <td>11253.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>265</th>
      <td>265</td>
      <td>1578</td>
      <td>ت</td>
      <td>Arabic Letter Teh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1319.0</td>
      <td>12013.0</td>
      <td>13332.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>202</th>
      <td>202</td>
      <td>1076</td>
      <td>д</td>
      <td>Cyrillic Small Letter De</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1266.0</td>
      <td>23689.0</td>
      <td>24955.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>238</th>
      <td>238</td>
      <td>1087</td>
      <td>п</td>
      <td>Cyrillic Small Letter Pe</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1263.0</td>
      <td>13947.0</td>
      <td>15210.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>239</th>
      <td>239</td>
      <td>1497</td>
      <td>י</td>
      <td>Hebrew Letter Yod</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>1223.0</td>
      <td>12298.0</td>
      <td>13521.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>225</th>
      <td>225</td>
      <td>1583</td>
      <td>د</td>
      <td>Arabic Letter Dal</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1220.0</td>
      <td>17677.0</td>
      <td>18897.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>212</th>
      <td>212</td>
      <td>1091</td>
      <td>у</td>
      <td>Cyrillic Small Letter U</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1183.0</td>
      <td>18523.0</td>
      <td>19706.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>217</th>
      <td>217</td>
      <td>1576</td>
      <td>ب</td>
      <td>Arabic Letter Beh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1178.0</td>
      <td>19024.0</td>
      <td>20202.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>182</th>
      <td>182</td>
      <td>953</td>
      <td>ι</td>
      <td>Greek Small Letter Iota</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>1168.0</td>
      <td>30118.0</td>
      <td>31286.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>196</th>
      <td>196</td>
      <td>963</td>
      <td>σ</td>
      <td>Greek Small Letter Sigma</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>1154.0</td>
      <td>25496.0</td>
      <td>26650.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>411</th>
      <td>411</td>
      <td>1108</td>
      <td>є</td>
      <td>Cyrillic Small Letter Ukrainian Ie</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1048.0</td>
      <td>845.0</td>
      <td>1893.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>245</th>
      <td>245</td>
      <td>1100</td>
      <td>ь</td>
      <td>Cyrillic Small Letter Soft Sign</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>1037.0</td>
      <td>12275.0</td>
      <td>13312.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>277</th>
      <td>277</td>
      <td>1607</td>
      <td>ه</td>
      <td>Arabic Letter Heh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>1014.0</td>
      <td>9536.0</td>
      <td>10550.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>250</th>
      <td>250</td>
      <td>1492</td>
      <td>ה</td>
      <td>Hebrew Letter He</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>956.0</td>
      <td>13570.0</td>
      <td>14526.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>259</th>
      <td>259</td>
      <td>1099</td>
      <td>ы</td>
      <td>Cyrillic Small Letter Yeru</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>898.0</td>
      <td>11027.0</td>
      <td>11925.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>246</th>
      <td>246</td>
      <td>1587</td>
      <td>س</td>
      <td>Arabic Letter Seen</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>871.0</td>
      <td>13787.0</td>
      <td>14658.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>304</th>
      <td>304</td>
      <td>1740</td>
      <td>ی</td>
      <td>Arabic Letter Farsi Yeh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>859.0</td>
      <td>7978.0</td>
      <td>8837.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>235</th>
      <td>235</td>
      <td>1075</td>
      <td>г</td>
      <td>Cyrillic Small Letter Ghe</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>857.0</td>
      <td>14470.0</td>
      <td>15327.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>266</th>
      <td>266</td>
      <td>1593</td>
      <td>ع</td>
      <td>Arabic Letter Ain</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>826.0</td>
      <td>11676.0</td>
      <td>12502.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>251</th>
      <td>251</td>
      <td>1073</td>
      <td>б</td>
      <td>Cyrillic Small Letter Be</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>792.0</td>
      <td>11667.0</td>
      <td>12459.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>241</th>
      <td>241</td>
      <td>965</td>
      <td>υ</td>
      <td>Greek Small Letter Upsilon</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>790.0</td>
      <td>12481.0</td>
      <td>13271.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>268</th>
      <td>268</td>
      <td>1079</td>
      <td>з</td>
      <td>Cyrillic Small Letter Ze</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>771.0</td>
      <td>10795.0</td>
      <td>11566.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>179</th>
      <td>179</td>
      <td>961</td>
      <td>ρ</td>
      <td>Greek Small Letter Rho</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>766.0</td>
      <td>31751.0</td>
      <td>32517.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>313</th>
      <td>313</td>
      <td>1500</td>
      <td>ל</td>
      <td>Hebrew Letter Lamed</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>736.0</td>
      <td>6012.0</td>
      <td>6748.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>477</th>
      <td>477</td>
      <td>1109</td>
      <td>ѕ</td>
      <td>Cyrillic Small Letter Dze</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>735.0</td>
      <td>481.0</td>
      <td>1216.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>343</th>
      <td>343</td>
      <td>1110</td>
      <td>і</td>
      <td>Cyrillic Small Letter Byelorussian-Ukrainian I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>715.0</td>
      <td>5872.0</td>
      <td>6587.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>247</th>
      <td>247</td>
      <td>1095</td>
      <td>ч</td>
      <td>Cyrillic Small Letter Che</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>698.0</td>
      <td>12603.0</td>
      <td>13301.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>195</th>
      <td>195</td>
      <td>949</td>
      <td>ε</td>
      <td>Greek Small Letter Epsilon</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>695.0</td>
      <td>26061.0</td>
      <td>26756.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>633</th>
      <td>633</td>
      <td>1405</td>
      <td>ս</td>
      <td>Armenian Small Letter Seh</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Armenian</td>
      <td>684.0</td>
      <td>1380.0</td>
      <td>2064.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>267</th>
      <td>267</td>
      <td>1577</td>
      <td>ة</td>
      <td>Arabic Letter Teh Marbuta</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>662.0</td>
      <td>11944.0</td>
      <td>12606.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>286</th>
      <td>286</td>
      <td>1512</td>
      <td>ר</td>
      <td>Hebrew Letter Resh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>640.0</td>
      <td>7224.0</td>
      <td>7864.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>224</th>
      <td>224</td>
      <td>1081</td>
      <td>й</td>
      <td>Cyrillic Small Letter Short I</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>630.0</td>
      <td>15783.0</td>
      <td>16413.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>234</th>
      <td>234</td>
      <td>951</td>
      <td>η</td>
      <td>Greek Small Letter Eta</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>624.0</td>
      <td>13810.0</td>
      <td>14434.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>294</th>
      <td>294</td>
      <td>1601</td>
      <td>ف</td>
      <td>Arabic Letter Feh</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>581.0</td>
      <td>8019.0</td>
      <td>8600.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>292</th>
      <td>292</td>
      <td>1488</td>
      <td>א</td>
      <td>Hebrew Letter Alef</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>579.0</td>
      <td>7519.0</td>
      <td>8098.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>288</th>
      <td>288</td>
      <td>1489</td>
      <td>ב</td>
      <td>Hebrew Letter Bet</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>553.0</td>
      <td>8228.0</td>
      <td>8781.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>347</th>
      <td>347</td>
      <td>1502</td>
      <td>מ</td>
      <td>Hebrew Letter Mem</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>550.0</td>
      <td>4640.0</td>
      <td>5190.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>280</th>
      <td>280</td>
      <td>1513</td>
      <td>ש</td>
      <td>Hebrew Letter Shin</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>548.0</td>
      <td>9444.0</td>
      <td>9992.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>308</th>
      <td>308</td>
      <td>1602</td>
      <td>ق</td>
      <td>Arabic Letter Qaf</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>547.0</td>
      <td>7641.0</td>
      <td>8188.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>338</th>
      <td>338</td>
      <td>1514</td>
      <td>ת</td>
      <td>Hebrew Letter Tav</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>540.0</td>
      <td>4840.0</td>
      <td>5380.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>197</th>
      <td>197</td>
      <td>956</td>
      <td>μ</td>
      <td>Greek Small Letter Mu</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>537.0</td>
      <td>25761.0</td>
      <td>26298.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>585</th>
      <td>585</td>
      <td>710</td>
      <td>ˆ</td>
      <td>Modifier Letter Circumflex Accent</td>
      <td>Letter</td>
      <td>Modifier</td>
      <td>Spacing Modifier Letters</td>
      <td>524.0</td>
      <td>428.0</td>
      <td>952.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>321</th>
      <td>321</td>
      <td>1093</td>
      <td>х</td>
      <td>Cyrillic Small Letter Ha</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>523.0</td>
      <td>6084.0</td>
      <td>6607.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>177</th>
      <td>177</td>
      <td>957</td>
      <td>ν</td>
      <td>Greek Small Letter Nu</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>515.0</td>
      <td>34240.0</td>
      <td>34755.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>339</th>
      <td>339</td>
      <td>1588</td>
      <td>ش</td>
      <td>Arabic Letter Sheen</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>512.0</td>
      <td>5788.0</td>
      <td>6300.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>349</th>
      <td>349</td>
      <td>1096</td>
      <td>ш</td>
      <td>Cyrillic Small Letter Sha</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>449.0</td>
      <td>4941.0</td>
      <td>5390.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>374</th>
      <td>374</td>
      <td>1504</td>
      <td>נ</td>
      <td>Hebrew Letter Nun</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>434.0</td>
      <td>3812.0</td>
      <td>4246.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>325</th>
      <td>325</td>
      <td>1580</td>
      <td>ج</td>
      <td>Arabic Letter Jeem</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>433.0</td>
      <td>6242.0</td>
      <td>6675.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>189</th>
      <td>189</td>
      <td>964</td>
      <td>τ</td>
      <td>Greek Small Letter Tau</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>414.0</td>
      <td>29001.0</td>
      <td>29415.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>187</th>
      <td>187</td>
      <td>955</td>
      <td>λ</td>
      <td>Greek Small Letter Lamda</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>411.0</td>
      <td>29903.0</td>
      <td>30314.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>283</th>
      <td>283</td>
      <td>1581</td>
      <td>ح</td>
      <td>Arabic Letter Hah</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>404.0</td>
      <td>8683.0</td>
      <td>9087.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>166</th>
      <td>166</td>
      <td>959</td>
      <td>ο</td>
      <td>Greek Small Letter Omicron</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>396.0</td>
      <td>40749.0</td>
      <td>41145.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>359</th>
      <td>359</td>
      <td>1078</td>
      <td>ж</td>
      <td>Cyrillic Small Letter Zhe</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>394.0</td>
      <td>4478.0</td>
      <td>4872.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>400</th>
      <td>400</td>
      <td>1582</td>
      <td>خ</td>
      <td>Arabic Letter Khah</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>391.0</td>
      <td>3999.0</td>
      <td>4390.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>330</th>
      <td>330</td>
      <td>1603</td>
      <td>ك</td>
      <td>Arabic Letter Kaf</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>387.0</td>
      <td>5987.0</td>
      <td>6374.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>367</th>
      <td>367</td>
      <td>1586</td>
      <td>ز</td>
      <td>Arabic Letter Zain</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>382.0</td>
      <td>4568.0</td>
      <td>4950.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>672</th>
      <td>672</td>
      <td>1811</td>
      <td>ܓ</td>
      <td>Syriac Letter Gamal</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Syriac</td>
      <td>360.0</td>
      <td>233.0</td>
      <td>593.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>269</th>
      <td>269</td>
      <td>1057</td>
      <td>С</td>
      <td>Cyrillic Capital Letter Es</td>
      <td>Letter</td>
      <td>Uppercase</td>
      <td>Cyrillic</td>
      <td>347.0</td>
      <td>9845.0</td>
      <td>10192.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>484</th>
      <td>484</td>
      <td>8467</td>
      <td>ℓ</td>
      <td>Script Small L</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Letterlike Symbols</td>
      <td>346.0</td>
      <td>2445.0</td>
      <td>2791.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>391</th>
      <td>391</td>
      <td>1491</td>
      <td>ד</td>
      <td>Hebrew Letter Dalet</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>318.0</td>
      <td>3560.0</td>
      <td>3878.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>203</th>
      <td>203</td>
      <td>960</td>
      <td>π</td>
      <td>Greek Small Letter Pi</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>298.0</td>
      <td>22082.0</td>
      <td>22380.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>406</th>
      <td>406</td>
      <td>1589</td>
      <td>ص</td>
      <td>Arabic Letter Sad</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Arabic</td>
      <td>293.0</td>
      <td>3804.0</td>
      <td>4097.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>396</th>
      <td>396</td>
      <td>1506</td>
      <td>ע</td>
      <td>Hebrew Letter Ayin</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>291.0</td>
      <td>3313.0</td>
      <td>3604.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>440</th>
      <td>440</td>
      <td>1501</td>
      <td>ם</td>
      <td>Hebrew Letter Final Mem</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Hebrew</td>
      <td>286.0</td>
      <td>2698.0</td>
      <td>2984.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>449</th>
      <td>449</td>
      <td>1102</td>
      <td>ю</td>
      <td>Cyrillic Small Letter Yu</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Cyrillic</td>
      <td>279.0</td>
      <td>2814.0</td>
      <td>3093.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>190</th>
      <td>190</td>
      <td>962</td>
      <td>ς</td>
      <td>Greek Small Letter Final Sigma</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Greek and Coptic</td>
      <td>276.0</td>
      <td>27879.0</td>
      <td>28155.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Punctuation and separators</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_punctsep</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Punctuation&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Separator&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Other&quot;</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_punctsep</span><span class="p">))</span>
<span class="n">dfkeep_punctsep</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>36
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>16</th>
      <td>16</td>
      <td>44</td>
      <td>,</td>
      <td>Comma</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>286106887.0</td>
      <td>406440340.0</td>
      <td>692547227.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>19</th>
      <td>19</td>
      <td>39</td>
      <td>'</td>
      <td>Apostrophe</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>279745827.0</td>
      <td>359597564.0</td>
      <td>639343391.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>46</td>
      <td>.</td>
      <td>Full Stop</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>270047735.0</td>
      <td>329582293.0</td>
      <td>599630028.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>34</th>
      <td>34</td>
      <td>45</td>
      <td>-</td>
      <td>Hyphen-Minus</td>
      <td>Punctuation</td>
      <td>Dash</td>
      <td>Basic Latin</td>
      <td>100118715.0</td>
      <td>120962325.0</td>
      <td>221081040.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>28</th>
      <td>28</td>
      <td>32</td>
      <td></td>
      <td>Space</td>
      <td>Separator</td>
      <td>Space</td>
      <td>Basic Latin</td>
      <td>88494564.0</td>
      <td>102873788.0</td>
      <td>191368352.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>30</th>
      <td>30</td>
      <td>58</td>
      <td>:</td>
      <td>Colon</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>80872165.0</td>
      <td>71707754.0</td>
      <td>152579919.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>43</th>
      <td>43</td>
      <td>47</td>
      <td>/</td>
      <td>Solidus</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>50243665.0</td>
      <td>42180730.0</td>
      <td>92424395.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>50</th>
      <td>50</td>
      <td>34</td>
      <td>"</td>
      <td>Quotation Mark</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>47363272.0</td>
      <td>58415460.0</td>
      <td>105778732.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>58</th>
      <td>58</td>
      <td>41</td>
      <td>)</td>
      <td>Right Parenthesis</td>
      <td>Punctuation</td>
      <td>Close</td>
      <td>Basic Latin</td>
      <td>39529388.0</td>
      <td>55662250.0</td>
      <td>95191638.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>59</th>
      <td>59</td>
      <td>40</td>
      <td>(</td>
      <td>Left Parenthesis</td>
      <td>Punctuation</td>
      <td>Open</td>
      <td>Basic Latin</td>
      <td>38061346.0</td>
      <td>54844441.0</td>
      <td>92905787.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>67</th>
      <td>67</td>
      <td>63</td>
      <td>?</td>
      <td>Question Mark</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>19788797.0</td>
      <td>15838803.0</td>
      <td>35627600.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>68</th>
      <td>68</td>
      <td>37</td>
      <td>%</td>
      <td>Percent Sign</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>19591388.0</td>
      <td>21748721.0</td>
      <td>41340109.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>65</th>
      <td>65</td>
      <td>33</td>
      <td>!</td>
      <td>Exclamation Mark</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>18898324.0</td>
      <td>13618218.0</td>
      <td>32516542.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>70</th>
      <td>70</td>
      <td>187</td>
      <td>»</td>
      <td>Right-Pointing Double Angle Quotation Mark</td>
      <td>Punctuation</td>
      <td>Final quote</td>
      <td>Latin-1 Supplement</td>
      <td>18387752.0</td>
      <td>33917446.0</td>
      <td>52305198.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>72</th>
      <td>72</td>
      <td>171</td>
      <td>«</td>
      <td>Left-Pointing Double Angle Quotation Mark</td>
      <td>Punctuation</td>
      <td>Initial quote</td>
      <td>Latin-1 Supplement</td>
      <td>17411564.0</td>
      <td>33209241.0</td>
      <td>50620805.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>73</th>
      <td>73</td>
      <td>10</td>
      <td>\n</td>
      <td>Char 10</td>
      <td>Other</td>
      <td>Control</td>
      <td>Basic Latin</td>
      <td>9588147.0</td>
      <td>10363093.0</td>
      <td>19951240.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>79</th>
      <td>79</td>
      <td>95</td>
      <td>_</td>
      <td>Low Line</td>
      <td>Punctuation</td>
      <td>Connector</td>
      <td>Basic Latin</td>
      <td>5714534.0</td>
      <td>5197269.0</td>
      <td>10911803.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>97</th>
      <td>97</td>
      <td>8230</td>
      <td>…</td>
      <td>Horizontal Ellipsis</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>General Punctuation</td>
      <td>4044671.0</td>
      <td>5252775.0</td>
      <td>9297446.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>89</th>
      <td>89</td>
      <td>59</td>
      <td>;</td>
      <td>Semicolon</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>3960162.0</td>
      <td>6209537.0</td>
      <td>10169699.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>91</th>
      <td>91</td>
      <td>38</td>
      <td>&amp;</td>
      <td>Ampersand</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>3426204.0</td>
      <td>2918437.0</td>
      <td>6344641.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>86</th>
      <td>86</td>
      <td>91</td>
      <td>[</td>
      <td>Left Square Bracket</td>
      <td>Punctuation</td>
      <td>Open</td>
      <td>Basic Latin</td>
      <td>2844327.0</td>
      <td>9523473.0</td>
      <td>12367800.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>88</th>
      <td>88</td>
      <td>93</td>
      <td>]</td>
      <td>Right Square Bracket</td>
      <td>Punctuation</td>
      <td>Close</td>
      <td>Basic Latin</td>
      <td>2543599.0</td>
      <td>9362069.0</td>
      <td>11905668.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>98</th>
      <td>98</td>
      <td>125</td>
      <td>}</td>
      <td>Right Curly Bracket</td>
      <td>Punctuation</td>
      <td>Close</td>
      <td>Basic Latin</td>
      <td>2260069.0</td>
      <td>2541205.0</td>
      <td>4801274.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>99</th>
      <td>99</td>
      <td>123</td>
      <td>{</td>
      <td>Left Curly Bracket</td>
      <td>Punctuation</td>
      <td>Open</td>
      <td>Basic Latin</td>
      <td>2258748.0</td>
      <td>2543422.0</td>
      <td>4802170.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>104</th>
      <td>104</td>
      <td>8226</td>
      <td>•</td>
      <td>Bullet</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>General Punctuation</td>
      <td>1917676.0</td>
      <td>2122822.0</td>
      <td>4040498.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>105</th>
      <td>105</td>
      <td>42</td>
      <td>*</td>
      <td>Asterisk</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>1770771.0</td>
      <td>1504578.0</td>
      <td>3275349.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>95</th>
      <td>95</td>
      <td>9</td>
      <td>\t</td>
      <td>Char 9</td>
      <td>Other</td>
      <td>Control</td>
      <td>Basic Latin</td>
      <td>1522053.0</td>
      <td>2085465.0</td>
      <td>3607518.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>109</th>
      <td>109</td>
      <td>64</td>
      <td>@</td>
      <td>Commercial At</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>1059575.0</td>
      <td>859011.0</td>
      <td>1918586.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>113</th>
      <td>113</td>
      <td>92</td>
      <td>\</td>
      <td>Reverse Solidus</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>528309.0</td>
      <td>831889.0</td>
      <td>1360198.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>117</th>
      <td>117</td>
      <td>35</td>
      <td>#</td>
      <td>Number Sign</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Basic Latin</td>
      <td>526919.0</td>
      <td>582141.0</td>
      <td>1109060.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>156</th>
      <td>156</td>
      <td>167</td>
      <td>§</td>
      <td>Section Sign</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>29947.0</td>
      <td>40115.0</td>
      <td>70062.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>140</th>
      <td>140</td>
      <td>191</td>
      <td>¿</td>
      <td>Inverted Question Mark</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>7933.0</td>
      <td>4537.0</td>
      <td>12470.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>279</th>
      <td>279</td>
      <td>8249</td>
      <td>‹</td>
      <td>Single Left-Pointing Angle Quotation Mark</td>
      <td>Punctuation</td>
      <td>Initial quote</td>
      <td>General Punctuation</td>
      <td>2795.0</td>
      <td>3410.0</td>
      <td>6205.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>469</th>
      <td>469</td>
      <td>161</td>
      <td>¡</td>
      <td>Inverted Exclamation Mark</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>1283.0</td>
      <td>2641.0</td>
      <td>3924.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>206</th>
      <td>206</td>
      <td>8240</td>
      <td>‰</td>
      <td>Per Mille Sign</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>General Punctuation</td>
      <td>1166.0</td>
      <td>17645.0</td>
      <td>18811.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>674</th>
      <td>674</td>
      <td>8225</td>
      <td>‡</td>
      <td>Double Dagger</td>
      <td>Punctuation</td>
      <td>Other</td>
      <td>General Punctuation</td>
      <td>283.0</td>
      <td>1326.0</td>
      <td>1609.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Symbols</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_symbols</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[((</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Symbol&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Code&quot;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">9000</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Latin-1 Supplement&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Letter&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;IsLatinLetter&quot;</span><span class="p">]))]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_symbols</span><span class="p">))</span>
<span class="n">dfkeep_symbols</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>34
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>74</th>
      <td>74</td>
      <td>176</td>
      <td>°</td>
      <td>Degree Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>8558786.0</td>
      <td>5457787.0</td>
      <td>14016573.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>84</th>
      <td>84</td>
      <td>124</td>
      <td>|</td>
      <td>Vertical Line</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>5506250.0</td>
      <td>7417170.0</td>
      <td>12923420.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>82</th>
      <td>82</td>
      <td>8364</td>
      <td>€</td>
      <td>Euro Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Currency Symbols</td>
      <td>5309670.0</td>
      <td>3588551.0</td>
      <td>8898221.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>83</th>
      <td>83</td>
      <td>61</td>
      <td>=</td>
      <td>Equals Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>3851169.0</td>
      <td>4258407.0</td>
      <td>8109576.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>100</th>
      <td>100</td>
      <td>62</td>
      <td>&gt;</td>
      <td>Greater-Than Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>3822951.0</td>
      <td>4608298.0</td>
      <td>8431249.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>93</th>
      <td>93</td>
      <td>43</td>
      <td>+</td>
      <td>Plus Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>3728710.0</td>
      <td>3279061.0</td>
      <td>7007771.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>107</th>
      <td>107</td>
      <td>60</td>
      <td>&lt;</td>
      <td>Less-Than Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>2007466.0</td>
      <td>3255821.0</td>
      <td>5263287.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>111</th>
      <td>111</td>
      <td>169</td>
      <td>©</td>
      <td>Copyright Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>432972.0</td>
      <td>305566.0</td>
      <td>738538.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>114</th>
      <td>114</td>
      <td>36</td>
      <td>$</td>
      <td>Dollar Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Basic Latin</td>
      <td>369961.0</td>
      <td>314547.0</td>
      <td>684508.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>116</th>
      <td>116</td>
      <td>94</td>
      <td>^</td>
      <td>Circumflex Accent</td>
      <td>Symbol</td>
      <td>Modifier</td>
      <td>Basic Latin</td>
      <td>344331.0</td>
      <td>253219.0</td>
      <td>597550.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>125</th>
      <td>125</td>
      <td>164</td>
      <td>¤</td>
      <td>Currency Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Latin-1 Supplement</td>
      <td>125542.0</td>
      <td>240300.0</td>
      <td>365842.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>127</th>
      <td>127</td>
      <td>174</td>
      <td>®</td>
      <td>Registered Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>44536.0</td>
      <td>33409.0</td>
      <td>77945.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>158</th>
      <td>158</td>
      <td>126</td>
      <td>~</td>
      <td>Tilde</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Basic Latin</td>
      <td>21968.0</td>
      <td>60110.0</td>
      <td>82078.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>136</th>
      <td>136</td>
      <td>215</td>
      <td>×</td>
      <td>Multiplication Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Latin-1 Supplement</td>
      <td>21631.0</td>
      <td>149656.0</td>
      <td>171287.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>141</th>
      <td>141</td>
      <td>8658</td>
      <td>⇒</td>
      <td>Rightwards Double Arrow</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Arrows</td>
      <td>13166.0</td>
      <td>11148.0</td>
      <td>24314.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>186</th>
      <td>186</td>
      <td>163</td>
      <td>£</td>
      <td>Pound Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Latin-1 Supplement</td>
      <td>12580.0</td>
      <td>19820.0</td>
      <td>32400.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>193</th>
      <td>193</td>
      <td>186</td>
      <td>º</td>
      <td>Masculine Ordinal Indicator</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>8393.0</td>
      <td>12088.0</td>
      <td>20481.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>165</th>
      <td>165</td>
      <td>8482</td>
      <td>™</td>
      <td>Trade Mark Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Letterlike Symbols</td>
      <td>6343.0</td>
      <td>4385.0</td>
      <td>10728.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>222</th>
      <td>222</td>
      <td>166</td>
      <td>¦</td>
      <td>Broken Bar</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>5581.0</td>
      <td>5477.0</td>
      <td>11058.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>175</th>
      <td>175</td>
      <td>170</td>
      <td>ª</td>
      <td>Feminine Ordinal Indicator</td>
      <td>Letter</td>
      <td>Other</td>
      <td>Latin-1 Supplement</td>
      <td>5253.0</td>
      <td>3063.0</td>
      <td>8316.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>249</th>
      <td>249</td>
      <td>181</td>
      <td>µ</td>
      <td>Micro Sign</td>
      <td>Letter</td>
      <td>Lowercase</td>
      <td>Latin-1 Supplement</td>
      <td>4164.0</td>
      <td>13373.0</td>
      <td>17537.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>194</th>
      <td>194</td>
      <td>8921</td>
      <td>⋙</td>
      <td>Very Much Greater-Than</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>2970.0</td>
      <td>1300.0</td>
      <td>4270.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>240</th>
      <td>240</td>
      <td>8804</td>
      <td>≤</td>
      <td>Less-Than Or Equal To</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>2338.0</td>
      <td>9329.0</td>
      <td>11667.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>385</th>
      <td>385</td>
      <td>8729</td>
      <td>∙</td>
      <td>Bullet Operator</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>2070.0</td>
      <td>2601.0</td>
      <td>4671.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>332</th>
      <td>332</td>
      <td>175</td>
      <td>¯</td>
      <td>Macron</td>
      <td>Symbol</td>
      <td>Modifier</td>
      <td>Latin-1 Supplement</td>
      <td>1978.0</td>
      <td>4888.0</td>
      <td>6866.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>472</th>
      <td>472</td>
      <td>247</td>
      <td>÷</td>
      <td>Division Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Latin-1 Supplement</td>
      <td>1257.0</td>
      <td>2712.0</td>
      <td>3969.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>293</th>
      <td>293</td>
      <td>8805</td>
      <td>≥</td>
      <td>Greater-Than Or Equal To</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>1164.0</td>
      <td>5072.0</td>
      <td>6236.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>300</th>
      <td>300</td>
      <td>8595</td>
      <td>↓</td>
      <td>Downwards Arrow</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Arrows</td>
      <td>1110.0</td>
      <td>2251.0</td>
      <td>3361.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>252</th>
      <td>252</td>
      <td>177</td>
      <td>±</td>
      <td>Plus-Minus Sign</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Latin-1 Supplement</td>
      <td>1008.0</td>
      <td>11766.0</td>
      <td>12774.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>601</th>
      <td>601</td>
      <td>165</td>
      <td>¥</td>
      <td>Yen Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Latin-1 Supplement</td>
      <td>626.0</td>
      <td>1161.0</td>
      <td>1787.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>329</th>
      <td>329</td>
      <td>8706</td>
      <td>∂</td>
      <td>Partial Differential</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>441.0</td>
      <td>5719.0</td>
      <td>6160.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>532</th>
      <td>532</td>
      <td>8801</td>
      <td>≡</td>
      <td>Identical To</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>432.0</td>
      <td>1955.0</td>
      <td>2387.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>557</th>
      <td>557</td>
      <td>162</td>
      <td>¢</td>
      <td>Cent Sign</td>
      <td>Symbol</td>
      <td>Currency</td>
      <td>Latin-1 Supplement</td>
      <td>380.0</td>
      <td>724.0</td>
      <td>1104.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>414</th>
      <td>414</td>
      <td>8776</td>
      <td>≈</td>
      <td>Almost Equal To</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Mathematical Operators</td>
      <td>278.0</td>
      <td>3833.0</td>
      <td>4111.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Graphical symbols</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_graphsymbols</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[((</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Symbol&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Code&quot;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">9000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Emoticons&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Supplemental Symbols and Pictographs&quot;</span><span class="p">))]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_graphsymbols</span><span class="p">))</span>
<span class="n">dfkeep_graphsymbols</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>66
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>115</th>
      <td>115</td>
      <td>10003</td>
      <td>✓</td>
      <td>Check Mark</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>382579.0</td>
      <td>212625.0</td>
      <td>595204.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>167</th>
      <td>167</td>
      <td>9829</td>
      <td>♥</td>
      <td>Black Heart Suit</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>13095.0</td>
      <td>7887.0</td>
      <td>20982.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>134</th>
      <td>134</td>
      <td>65533</td>
      <td>�</td>
      <td>Replacement Character</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Specials</td>
      <td>9182.0</td>
      <td>4585.0</td>
      <td>13767.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>214</th>
      <td>214</td>
      <td>9654</td>
      <td>▶</td>
      <td>Black Right-Pointing Triangle</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Geometric Shapes</td>
      <td>7839.0</td>
      <td>6770.0</td>
      <td>14609.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>183</th>
      <td>183</td>
      <td>9888</td>
      <td>⚠</td>
      <td>Warning Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>3448.0</td>
      <td>2585.0</td>
      <td>6033.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>207</th>
      <td>207</td>
      <td>9733</td>
      <td>★</td>
      <td>Black Star</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>3280.0</td>
      <td>1836.0</td>
      <td>5116.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>337</th>
      <td>337</td>
      <td>10145</td>
      <td>➡</td>
      <td>Black Rightwards Arrow</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>2808.0</td>
      <td>3310.0</td>
      <td>6118.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>358</th>
      <td>358</td>
      <td>128308</td>
      <td>🔴</td>
      <td>Large Red Circle</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>2383.0</td>
      <td>3360.0</td>
      <td>5743.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>401</th>
      <td>401</td>
      <td>10084</td>
      <td>❤</td>
      <td>Heavy Black Heart</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>2321.0</td>
      <td>2367.0</td>
      <td>4688.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>350</th>
      <td>350</td>
      <td>128170</td>
      <td>💪</td>
      <td>Flexed Biceps</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>2237.0</td>
      <td>2820.0</td>
      <td>5057.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>335</th>
      <td>335</td>
      <td>128293</td>
      <td>🔥</td>
      <td>Fire</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>2157.0</td>
      <td>2705.0</td>
      <td>4862.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>346</th>
      <td>346</td>
      <td>128073</td>
      <td>👉</td>
      <td>White Right Pointing Backhand Index</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>2021.0</td>
      <td>2245.0</td>
      <td>4266.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>407</th>
      <td>407</td>
      <td>127942</td>
      <td>🏆</td>
      <td>Trophy</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>1666.0</td>
      <td>2529.0</td>
      <td>4195.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>353</th>
      <td>353</td>
      <td>128077</td>
      <td>👍</td>
      <td>Thumbs Up Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>1604.0</td>
      <td>1237.0</td>
      <td>2841.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>436</th>
      <td>436</td>
      <td>128079</td>
      <td>👏</td>
      <td>Clapping Hands Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>1539.0</td>
      <td>2100.0</td>
      <td>3639.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>422</th>
      <td>422</td>
      <td>9917</td>
      <td>⚽</td>
      <td>Soccer Ball</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>1516.0</td>
      <td>2329.0</td>
      <td>3845.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>433</th>
      <td>433</td>
      <td>9786</td>
      <td>☺</td>
      <td>White Smiling Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>1366.0</td>
      <td>1149.0</td>
      <td>2515.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>493</th>
      <td>493</td>
      <td>11088</td>
      <td>⭐</td>
      <td>White Medium Star</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Arrows</td>
      <td>1086.0</td>
      <td>1620.0</td>
      <td>2706.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>470</th>
      <td>470</td>
      <td>128309</td>
      <td>🔵</td>
      <td>Large Blue Circle</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>1085.0</td>
      <td>1755.0</td>
      <td>2840.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>395</th>
      <td>395</td>
      <td>9989</td>
      <td>✅</td>
      <td>White Heavy Check Mark</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>980.0</td>
      <td>850.0</td>
      <td>1830.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>244</th>
      <td>244</td>
      <td>128161</td>
      <td>💡</td>
      <td>Electric Light Bulb</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>882.0</td>
      <td>365.0</td>
      <td>1247.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>593</th>
      <td>593</td>
      <td>128680</td>
      <td>🚨</td>
      <td>Police Cars Revolving Light</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Transport and Map Symbols</td>
      <td>797.0</td>
      <td>1110.0</td>
      <td>1907.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>598</th>
      <td>598</td>
      <td>128165</td>
      <td>💥</td>
      <td>Collision Symbol</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>785.0</td>
      <td>1100.0</td>
      <td>1885.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>607</th>
      <td>607</td>
      <td>128250</td>
      <td>📺</td>
      <td>Television</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>761.0</td>
      <td>1070.0</td>
      <td>1831.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>611</th>
      <td>611</td>
      <td>9889</td>
      <td>⚡</td>
      <td>High Voltage Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>759.0</td>
      <td>1050.0</td>
      <td>1809.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>467</th>
      <td>467</td>
      <td>10047</td>
      <td>✿</td>
      <td>Black Florette</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>753.0</td>
      <td>425.0</td>
      <td>1178.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>547</th>
      <td>547</td>
      <td>128121</td>
      <td>👹</td>
      <td>Japanese Ogre</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>726.0</td>
      <td>530.0</td>
      <td>1256.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>319</th>
      <td>319</td>
      <td>10148</td>
      <td>➤</td>
      <td>Black Rightwards Arrowhead</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>709.0</td>
      <td>315.0</td>
      <td>1024.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>507</th>
      <td>507</td>
      <td>127909</td>
      <td>🎥</td>
      <td>Movie Camera</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>673.0</td>
      <td>830.0</td>
      <td>1503.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>418</th>
      <td>418</td>
      <td>128248</td>
      <td>📸</td>
      <td>Camera With Flash</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>671.0</td>
      <td>775.0</td>
      <td>1446.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>299</th>
      <td>299</td>
      <td>10132</td>
      <td>➔</td>
      <td>Heavy Wide-Headed Rightwards Arrow</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>633.0</td>
      <td>345.0</td>
      <td>978.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>558</th>
      <td>558</td>
      <td>9825</td>
      <td>♡</td>
      <td>White Heart Suit</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>620.0</td>
      <td>582.0</td>
      <td>1202.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>356</th>
      <td>356</td>
      <td>128155</td>
      <td>💛</td>
      <td>Yellow Heart</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>571.0</td>
      <td>465.0</td>
      <td>1036.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>659</th>
      <td>659</td>
      <td>128071</td>
      <td>👇</td>
      <td>White Down Pointing Backhand Index</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>570.0</td>
      <td>685.0</td>
      <td>1255.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>654</th>
      <td>654</td>
      <td>128074</td>
      <td>👊</td>
      <td>Fisted Hand Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>569.0</td>
      <td>890.0</td>
      <td>1459.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>765</th>
      <td>765</td>
      <td>9835</td>
      <td>♫</td>
      <td>Beamed Eighth Notes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>558.0</td>
      <td>1045.0</td>
      <td>1603.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>668</th>
      <td>668</td>
      <td>128078</td>
      <td>👎</td>
      <td>Thumbs Down Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>555.0</td>
      <td>369.0</td>
      <td>924.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>681</th>
      <td>681</td>
      <td>9794</td>
      <td>♂</td>
      <td>Male Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>537.0</td>
      <td>1076.0</td>
      <td>1613.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>727</th>
      <td>727</td>
      <td>9792</td>
      <td>♀</td>
      <td>Female Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>515.0</td>
      <td>938.0</td>
      <td>1453.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>832</th>
      <td>832</td>
      <td>128076</td>
      <td>👌</td>
      <td>Ok Hand Sign</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>476.0</td>
      <td>615.0</td>
      <td>1091.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>855</th>
      <td>855</td>
      <td>11015</td>
      <td>⬇</td>
      <td>Downwards Black Arrow</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Arrows</td>
      <td>444.0</td>
      <td>520.0</td>
      <td>964.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>820</th>
      <td>820</td>
      <td>10074</td>
      <td>❚</td>
      <td>Heavy Vertical Bar</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>431.0</td>
      <td>470.0</td>
      <td>901.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>956</th>
      <td>956</td>
      <td>10060</td>
      <td>❌</td>
      <td>Cross Mark</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>419.0</td>
      <td>470.0</td>
      <td>889.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>935</th>
      <td>935</td>
      <td>9834</td>
      <td>♪</td>
      <td>Eighth Note</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>418.0</td>
      <td>658.0</td>
      <td>1076.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>826</th>
      <td>826</td>
      <td>128153</td>
      <td>💙</td>
      <td>Blue Heart</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>418.0</td>
      <td>580.0</td>
      <td>998.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>355</th>
      <td>355</td>
      <td>9650</td>
      <td>▲</td>
      <td>Black Up-Pointing Triangle</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Geometric Shapes</td>
      <td>409.0</td>
      <td>4783.0</td>
      <td>5192.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>753</th>
      <td>753</td>
      <td>9996</td>
      <td>✌</td>
      <td>Victory Hand</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>399.0</td>
      <td>402.0</td>
      <td>801.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>644</th>
      <td>644</td>
      <td>10064</td>
      <td>❐</td>
      <td>Upper Right Drop-Shadowed White Square</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>396.0</td>
      <td>220.0</td>
      <td>616.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>987</th>
      <td>987</td>
      <td>10549</td>
      <td>⤵</td>
      <td>Arrow Pointing Rightwards Then Curving Downwards</td>
      <td>Symbol</td>
      <td>Math</td>
      <td>Supplemental Arrows-B</td>
      <td>376.0</td>
      <td>480.0</td>
      <td>856.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>812</th>
      <td>812</td>
      <td>127936</td>
      <td>🏀</td>
      <td>Basketball And Hoop</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>370.0</td>
      <td>600.0</td>
      <td>970.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>645</th>
      <td>645</td>
      <td>128640</td>
      <td>🚀</td>
      <td>Rocket</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Transport and Map Symbols</td>
      <td>358.0</td>
      <td>295.0</td>
      <td>653.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>917</th>
      <td>917</td>
      <td>127897</td>
      <td>🎙</td>
      <td>Studio Microphone</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>356.0</td>
      <td>505.0</td>
      <td>861.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>740</th>
      <td>740</td>
      <td>127881</td>
      <td>🎉</td>
      <td>Party Popper</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>356.0</td>
      <td>440.0</td>
      <td>796.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1001</th>
      <td>1001</td>
      <td>9994</td>
      <td>✊</td>
      <td>Raised Fist</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>347.0</td>
      <td>485.0</td>
      <td>832.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>841</th>
      <td>841</td>
      <td>127934</td>
      <td>🎾</td>
      <td>Tennis Racquet And Ball</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>344.0</td>
      <td>569.0</td>
      <td>913.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>483</th>
      <td>483</td>
      <td>128200</td>
      <td>📈</td>
      <td>Chart With Upwards Trend</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>343.0</td>
      <td>230.0</td>
      <td>573.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1002</th>
      <td>1002</td>
      <td>10052</td>
      <td>❄</td>
      <td>Snowflake</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>332.0</td>
      <td>490.0</td>
      <td>822.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>676</th>
      <td>676</td>
      <td>9734</td>
      <td>☆</td>
      <td>White Star</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols</td>
      <td>331.0</td>
      <td>944.0</td>
      <td>1275.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>882</th>
      <td>882</td>
      <td>127386</td>
      <td>🆚</td>
      <td>Squared Vs</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Enclosed Alphanumeric Supplement</td>
      <td>329.0</td>
      <td>550.0</td>
      <td>879.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>889</th>
      <td>889</td>
      <td>127945</td>
      <td>🏉</td>
      <td>Rugby Football</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>328.0</td>
      <td>530.0</td>
      <td>858.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>965</th>
      <td>965</td>
      <td>128064</td>
      <td>👀</td>
      <td>Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>327.0</td>
      <td>415.0</td>
      <td>742.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1146</th>
      <td>1146</td>
      <td>128251</td>
      <td>📻</td>
      <td>Radio</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>322.0</td>
      <td>355.0</td>
      <td>677.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1080</th>
      <td>1080</td>
      <td>128488</td>
      <td>🗨</td>
      <td>Left Speech Bubble</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>314.0</td>
      <td>390.0</td>
      <td>704.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>998</th>
      <td>998</td>
      <td>128247</td>
      <td>📷</td>
      <td>Camera</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>301.0</td>
      <td>450.0</td>
      <td>751.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1334</th>
      <td>1334</td>
      <td>10071</td>
      <td>❗</td>
      <td>Heavy Exclamation Mark Symbol</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Dingbats</td>
      <td>291.0</td>
      <td>280.0</td>
      <td>571.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1051</th>
      <td>1051</td>
      <td>128172</td>
      <td>💬</td>
      <td>Speech Balloon</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Miscellaneous Symbols and Pictographs</td>
      <td>291.0</td>
      <td>508.0</td>
      <td>799.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Emoticons</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfkeep_emoticons</span> <span class="o">=</span> <span class="n">dfcharskeep</span><span class="p">[((</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Symbol&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Code&quot;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">9000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">((</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Emoticons&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Block&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Supplemental Symbols and Pictographs&quot;</span><span class="p">)))]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfkeep_emoticons</span><span class="p">))</span>
<span class="n">dfkeep_emoticons</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>31
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>153</th>
      <td>153</td>
      <td>128578</td>
      <td>🙂</td>
      <td>Slightly Smiling Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>20346.0</td>
      <td>18170.0</td>
      <td>38516.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>150</th>
      <td>150</td>
      <td>128521</td>
      <td>😉</td>
      <td>Winking Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>18080.0</td>
      <td>13563.0</td>
      <td>31643.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>260</th>
      <td>260</td>
      <td>128512</td>
      <td>😀</td>
      <td>Grinning Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>3992.0</td>
      <td>3645.0</td>
      <td>7637.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>326</th>
      <td>326</td>
      <td>128514</td>
      <td>😂</td>
      <td>Face With Tears Of Joy</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>3682.0</td>
      <td>3250.0</td>
      <td>6932.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>387</th>
      <td>387</td>
      <td>128513</td>
      <td>😁</td>
      <td>Grinning Face With Smiling Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>2194.0</td>
      <td>1699.0</td>
      <td>3893.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>287</th>
      <td>287</td>
      <td>128522</td>
      <td>😊</td>
      <td>Smiling Face With Smiling Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>1958.0</td>
      <td>1385.0</td>
      <td>3343.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>527</th>
      <td>527</td>
      <td>128577</td>
      <td>🙁</td>
      <td>Slightly Frowning Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>1072.0</td>
      <td>1175.0</td>
      <td>2247.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>548</th>
      <td>548</td>
      <td>128591</td>
      <td>🙏</td>
      <td>Person With Folded Hands</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>1051.0</td>
      <td>1345.0</td>
      <td>2396.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>512</th>
      <td>512</td>
      <td>128517</td>
      <td>😅</td>
      <td>Smiling Face With Open Mouth And Cold Sweat</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>978.0</td>
      <td>834.0</td>
      <td>1812.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>562</th>
      <td>562</td>
      <td>128525</td>
      <td>😍</td>
      <td>Smiling Face With Heart-Shaped Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>957.0</td>
      <td>1285.0</td>
      <td>2242.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>523</th>
      <td>523</td>
      <td>128515</td>
      <td>😃</td>
      <td>Smiling Face With Open Mouth</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>916.0</td>
      <td>755.0</td>
      <td>1671.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>632</th>
      <td>632</td>
      <td>128545</td>
      <td>😡</td>
      <td>Pouting Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>899.0</td>
      <td>875.0</td>
      <td>1774.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>655</th>
      <td>655</td>
      <td>129315</td>
      <td>🤣</td>
      <td>Rolling On The Floor Laughing</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>802.0</td>
      <td>710.0</td>
      <td>1512.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>498</th>
      <td>498</td>
      <td>128516</td>
      <td>😄</td>
      <td>Smiling Face With Open Mouth And Smiling Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>756.0</td>
      <td>540.0</td>
      <td>1296.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>513</th>
      <td>513</td>
      <td>129300</td>
      <td>🤔</td>
      <td>Thinking Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>745.0</td>
      <td>590.0</td>
      <td>1335.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>454</th>
      <td>454</td>
      <td>128526</td>
      <td>😎</td>
      <td>Smiling Face With Sunglasses</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>740.0</td>
      <td>545.0</td>
      <td>1285.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>739</th>
      <td>739</td>
      <td>128557</td>
      <td>😭</td>
      <td>Loudly Crying Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>721.0</td>
      <td>745.0</td>
      <td>1466.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>708</th>
      <td>708</td>
      <td>128561</td>
      <td>😱</td>
      <td>Face Screaming In Fear</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>719.0</td>
      <td>790.0</td>
      <td>1509.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>669</th>
      <td>669</td>
      <td>128540</td>
      <td>😜</td>
      <td>Face With Stuck-Out Tongue And Winking Eye</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>616.0</td>
      <td>459.0</td>
      <td>1075.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>720</th>
      <td>720</td>
      <td>128523</td>
      <td>😋</td>
      <td>Face Savouring Delicious Food</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>508.0</td>
      <td>405.0</td>
      <td>913.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>873</th>
      <td>873</td>
      <td>129321</td>
      <td>🤩</td>
      <td>Grinning Face With Star Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>456.0</td>
      <td>550.0</td>
      <td>1006.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>791</th>
      <td>791</td>
      <td>128588</td>
      <td>🙌</td>
      <td>Person Raising Both Hands In Celebration</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>455.0</td>
      <td>655.0</td>
      <td>1110.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>417</th>
      <td>417</td>
      <td>128580</td>
      <td>🙄</td>
      <td>Face With Rolling Eyes</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>437.0</td>
      <td>250.0</td>
      <td>687.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>643</th>
      <td>643</td>
      <td>128518</td>
      <td>😆</td>
      <td>Smiling Face With Open Mouth And Tightly-Close...</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>417.0</td>
      <td>330.0</td>
      <td>747.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>938</th>
      <td>938</td>
      <td>128539</td>
      <td>😛</td>
      <td>Face With Stuck-Out Tongue</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>374.0</td>
      <td>405.0</td>
      <td>779.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>874</th>
      <td>874</td>
      <td>129351</td>
      <td>🥇</td>
      <td>First Place Medal</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>372.0</td>
      <td>545.0</td>
      <td>917.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>427</th>
      <td>427</td>
      <td>129322</td>
      <td>🤪</td>
      <td>Grinning Face With One Large And One Small Eye</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>365.0</td>
      <td>245.0</td>
      <td>610.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1030</th>
      <td>1030</td>
      <td>128546</td>
      <td>😢</td>
      <td>Crying Face</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>361.0</td>
      <td>404.0</td>
      <td>765.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>856</th>
      <td>856</td>
      <td>128519</td>
      <td>😇</td>
      <td>Smiling Face With Halo</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Emoticons</td>
      <td>291.0</td>
      <td>205.0</td>
      <td>496.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>868</th>
      <td>868</td>
      <td>129318</td>
      <td>🤦</td>
      <td>Face Palm</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>277.0</td>
      <td>190.0</td>
      <td>467.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1016</th>
      <td>1016</td>
      <td>129352</td>
      <td>🥈</td>
      <td>Second Place Medal</td>
      <td>Symbol</td>
      <td>Other</td>
      <td>Supplemental Symbols and Pictographs</td>
      <td>276.0</td>
      <td>425.0</td>
      <td>701.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Will be ignored ...</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="n">dfcharskeep</span><span class="p">[</span><span class="n">dfcharskeep</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Mark&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Code</th>
      <th>Char</th>
      <th>Name</th>
      <th>Category</th>
      <th>Subcategory</th>
      <th>Block</th>
      <th>CountBusiness</th>
      <th>CountWikipedia</th>
      <th>Count</th>
      <th>IsLatinLetter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>278</th>
      <td>278</td>
      <td>769</td>
      <td>́</td>
      <td>Combining Acute Accent</td>
      <td>Mark</td>
      <td>Nonspacing</td>
      <td>Combining Diacritical Marks</td>
      <td>1448.0</td>
      <td>9189.0</td>
      <td>10637.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>441</th>
      <td>441</td>
      <td>3659</td>
      <td>๋</td>
      <td>Thai Character Mai Chattawa</td>
      <td>Mark</td>
      <td>Nonspacing</td>
      <td>Thai</td>
      <td>864.0</td>
      <td>492.0</td>
      <td>1356.0</td>
      <td>False</td>
    </tr>
    <tr>
      <th>475</th>
      <td>475</td>
      <td>2494</td>
      <td>া</td>
      <td>Bengali Vowel Sign Aa</td>
      <td>Mark</td>
      <td>Spacing Combining</td>
      <td>Bengali</td>
      <td>441.0</td>
      <td>2840.0</td>
      <td>3281.0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
</div>
 

